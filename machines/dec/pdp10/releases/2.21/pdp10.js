(function(){/*
 https://www.pcjs.org/machines/modules/v2/message.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/dumpapi.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/reportapi.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/userapi.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/keys.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/message.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/embed.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/defines.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/format.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/pcfs.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/strlib.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/usrlib.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/weblib.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/component.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/dbglib.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/defines.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/panel.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/bus.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/device.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/memory.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/cpu.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/cpustate.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/cpuops.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/debugger.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/rom.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/ram.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/serial.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/macro10.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/dec/pdp10/modules/v2/computer.js (C) 2012-2026 Jeff Parsons
 https://www.pcjs.org/machines/modules/v2/state.js (C) 2012-2026 Jeff Parsons
*/
var n,ba=typeof Object.create=="function"?Object.create:function(a){function b(){}b.prototype=a;return new b},da=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ea(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var fa=ea(this);function ka(a,b){if(b)a:{var c=fa;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&da(c,a,{configurable:!0,writable:!0,value:b})}}var na;
if(typeof Object.setPrototypeOf=="function")na=Object.setPrototypeOf;else{var oa;a:{var pa={a:!0},qa={};try{qa.__proto__=pa;oa=qa.a;break a}catch(a){}oa=!1}na=oa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var wa=na;
function xa(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(wa)wa(a,b);else for(var c in b)if(c!="prototype")if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ad=b.prototype}function ya(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}
function za(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:ya(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}function Aa(a){if(!(a instanceof Array)){a=za(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function Ba(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}
ka("String.prototype.replaceAll",function(a){return a?a:function(b,c){if(b instanceof RegExp&&!b.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return b instanceof RegExp?this.replace(b,c):this.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c)}});
ka("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0)return b;var c=Math.floor(Math.abs(b));return b<0?-c:c}});ka("String.prototype.repeat",function(a){return a?a:function(b){if(this==null)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");var c=this;if(b<0||b>1342177279)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});
ka("Number.isNaN",function(a){return a?a:function(b){return typeof b==="number"&&isNaN(b)}});ka("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.g=f;da(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.g};var d="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",e=0;return b});
ka("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");da(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return Ca(ya(this))}});return a});function Ca(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function Da(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}
ka("Array.prototype.keys",function(a){return a?a:function(){return Da(this,function(b){return b})}});ka("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});var Ea=typeof window!="undefined",Ia=typeof window!="undefined"?{}:global,p=typeof window!="undefined"?window:global,Ja=typeof document!="undefined"?document:{},u={machines:{},components:[],commands:{},files:null};p.PCjs?u=p.PCjs:p.PCjs=u;p.LOCALDISKS=!1;var v={log:68719476736,warn:549755813888,halt:70368744177664,buffer:0x800000000000};
function Ka(){this.g={};for(var a=0;a<23;a++)this.g["ACDFGHMNSTWYBbdfjcsoXx%"[a]]=null}function La(){var a=Ba.apply(0,arguments);if(a[0]===void 0)a=new Date(Date.now());else if(typeof a[0]==="string"){var b=a[0];b.indexOf(":")<0?b+=" "+(a[1]||"00:00:00 UTC"):b.match(/^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9] [0-9][0-9]:[0-9][0-9]:[0-9][0-9]$/)&&(a[1]||(b+=" UTC"));a=new Date(b)}else a=a[1]===void 0?new Date(a[0]):new Date(Date.UTC.apply(Date,Aa(a)));return a}
Ka.prototype.B=function(a){var b=Ba.apply(1,arguments);if(!b||!b.length)return a;var c="",d=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([bwhlL]?)([A-Za-z%])/),e=0,f;for(f=0;f<d.length-6;f+=6){c+=d[f];var g=d[f+5];if(this.g[g]===void 0)c+="%"+d[f+1]+d[f+2]+d[f+3]+d[f+4]+g;else{if(e<b.length){var h=b[e];g!="%"&&e++}else h=b[b.length-1];var k=!1,l=d[f+1],m=l.indexOf("#")>=0,r=l.indexOf("0")>=0,q=d[f+2];q=="*"?(q=h,h=e<b.length?b[e++]:b[b.length-1]):q=+q||0;var t=d[f+3];t=t?+t.substr(1):-1;var E=d[f+4],
ca=null,H=0,y="",A="ACDFGHMNSTWY".indexOf(g)>=0&&typeof h!="object"?La(h):h;switch(g){case "C":c+=isNaN(A.getTime())?void 0:this.B("%#W, %#F %#D, %#Y".replaceAll("#",m?"#":""),A);continue;case "D":h=m?A.getUTCDate():A.getDate();g="d";break;case "A":case "G":case "H":h=m?A.getUTCHours():A.getHours();g=="A"?(h=h<12?"am":"pm",g="s"):(g=="G"&&(h=h?h>12?h-12:h:12),g="d");break;case "F":case "M":h=m?A.getUTCMonth():A.getMonth();g=="F"?(h=Ma[h],g="s"):(h++,g="d");break;case "N":h=m?A.getUTCMinutes():A.getMinutes();
g="d";break;case "S":h=m?A.getUTCSeconds():A.getSeconds();g="d";break;case "T":c+=isNaN(A.getTime())?void 0:this.B("%#Y-%#02M-%#02D %#02H:%#02N:%#02S".replaceAll("#",m?"#":""),A);continue;case "W":h=Na[m?A.getUTCDay():A.getDay()];g="s";break;case "Y":h=m?A.getUTCFullYear():A.getFullYear(),t>0&&(h%=Math.pow(10,t)),g="d"}switch(g){case "b":c+=h?"true":"false";break;case "d":h=Math.trunc(h),t>=0&&(r=!0,q<t&&(q=t),t=-1);case "f":h=+h;g=h+"";t>=0&&(g=h.toFixed(t));g.length<q&&(r?(h<0&&(q--,g=g.substr(1)),
g=("0".repeat(q)+g).slice(-q),h<0&&(g="-"+g)):g=(" ".repeat(q)+g).slice(-q));c+=g;break;case "j":c+=JSON.stringify(h,null,q||void 0);break;case "c":h=typeof h=="string"?h[0]:String.fromCharCode(h);case "s":if(h!=void 0)for(typeof h!="string"&&(h=h.toString()),t>=0&&(h=h.substr(0,t));h.length<q;)h=l.indexOf("-")>=0?h+" ":" "+h;c+=h;break;case "B":H=2,m&&(y="0b");case "o":H||(H=8),!y&&m&&(y="0o");case "X":ca=Oa;case "x":g="";H||(H=16);!y&&m&&(y="0x");ca||(ca=Sa);typeof h=="string"&&h[0]=="-"&&(k=!0,
h=h.slice(1));h=Math.trunc(h);k&&(h=-h);h<0&&((h|0)==h?h>>>=0:Math.abs(h)<=9007199254740992&&(h+=9007199254740992));t>=0&&(r=!0,q<t&&(q=t));r&&!q&&(E=="b"?q=2:E=="h"||E=="w"?q=4:E=="l"?q=8:(q=Math.abs(h),q=q<=255?2:q<=65535?4:q<=4294967295?8:9),q+=y.length);q-=y.length;do k=16,Number.isNaN(h)||(k=h&H-1,h=Math.trunc(h/H)),r||!g||k||h?g=ca[k]+g:(y&&(g=y+g,y=""),q>0&&(g=" "+g));while(--q>0||h);c+=y+g;break;case "%":c+="%";break;default:c=this.g[g]?c+this.g[g](g,l,q,t,h):c+("(unimplemented sprintf type: %"+
g+")")}}}return c+=d[f]};
var Na="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ma="January February March April May June July August September October November December".split(" "),Sa="0123456789abcdef?",Oa="0123456789ABCDEF?",Ta={wc:0,Lb:1,yc:2,zc:3,Ac:4,Bc:5,Cc:6,Dc:7,xb:8,Ec:9,Mb:10,Fc:11,Gc:12,Nb:13,Hc:14,Ic:15,Jc:16,Kc:17,Lc:18,Mc:19,Nc:20,Oc:21,Pc:22,Qc:23,Rc:24,Sc:25,Tc:26,Vc:27," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,
1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,wb:65,vc:66,xc:67,Uc:68,E:69,Wc:70,Xc:71,Yc:72,Zc:73,$c:74,ad:75,bd:76,cd:77,dd:78,ed:79,fd:80,Q:81,gd:82,hd:83,jd:84,kd:85,ld:86,md:87,nd:88,od:89,Pb:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,a:97,b:98,c:99,d:100,e:101,f:102,rd:103,sd:104,td:105,vd:106,k:107,wd:108,xd:109,n:110,yd:111,p:112,q:113,r:114,s:115,t:116,Bd:117,Cd:118,w:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Ob:127};
function Ua(a){var b=null,c=a.indexOf(Va)==0?u.files:null;if(c){a=a.slice(Va.length+1).split("/");var d,e;for(d=0;d<a.length;d++){var f=a[d],g=!1;if(!f){b=c;break}for(e=0;e<c.files.length;e++){var h=c.files[e];if(h.name.toLowerCase()==f.toLowerCase()){if(d==a.length-1){b=h;break}if(h.files){c=h;g=!0;break}}}if(b)break;if(!g&&d<a.length-1)break}}return b}var Va="/pcfs";u.files||(u.files={name:"",size:0,pd:16,qd:new Date,files:[]});function Wa(){}
function Xa(a,b){if(a){b||(b=10);var c,d=a.indexOf(",")>0;d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);c=="#"?(b=8,c=""):c=="$"&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),c=="0b"&&d||c=="^B"?(b=2,c=""):c=="0o"||c=="^O"?(b=8,c=""):c=="^D"?(b=10,c=""):c=="0x"&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);c=="Y"||c=="y"?(b=2,c=""):c=="."?(b=10,c=""):c=="H"||c=="h"?(b=16,c=""):c=="K"?c="000":c=="M"?c="000000":c=="G"&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;b<=10&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));if((b&&b!=10?b==16?a.match(/^-?[0-9a-f]+$/i)!==null:b==8?a.match(/^-?[0-7]+$/)!==null:b==2&&a.match(/^-?[01]+$/)!==null:a.match(/^-?[0-9]+$/)!==null)&&!isNaN(f=parseInt(a,b))){e&&(f<0&&(f+=68719476736),f=e>0?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function Ya(a,b,c,d,e){e=e===void 0?0:e;var f="";isNaN(a)||typeof a!="number"?a=null:(a<0&&a>-1&&(a=-1),a<0&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;c-- >0;){g||(f=","+f,g=e);if(a==null)f="?"+f;else{var h=a%b;h+=h>=0&&h<=9?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(d===void 0?"":d)+f}function Za(a,b,c){b?b>12&&(b=12):(b=Math.abs(a),b=b<=262143?6:b<=16777215?8:12);return Ya(a,8,b,c?"0o":"")}
function $a(a,b){b?b>11&&(b=11):b=Math.abs(a)<=99999?5:11;return Ya(a,10,b)}function ab(a,b,c){b?b>9&&(b=9):(b=Math.abs(a),b=b<=255?2:b<=65535?4:b<=4294967295?8:9);return Ya(a,16,b,c?"0x":"")}function bb(a){var b=a,c=a.lastIndexOf("/");c>=0&&(b=a.substr(c+1));c=b.indexOf("&");c>0&&(b=b.substr(0,c));return b}function cb(a){var b="",c=a.lastIndexOf(".");c>=0&&(b=a.substr(c+1).toLowerCase(),b=="json5"&&(b="json"));return b}function db(a,b){return a.indexOf(b,a.length-b.length)!==-1}
function eb(a){return a.replace(/[&<>"'$]/g,function(b){return fb[b]})}function gb(a,b){return hb("%"+b+"."+Math.abs(b)+"s",a)}function lb(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}var fb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;",$:"&dollar;"},mb=new Ka,hb=mb.B.bind(mb);function nb(a,b,c){var d=0,e=a.length,f=0;for(c===void 0&&(c=function(k,l){return k>l?1:k<l?-1:0});d<e;){var g=d+e>>1,h=void 0;h=c(b,a[g]);h>0?d=g+1:(e=g,f=!h)}return f?d:~d}
function ob(a,b,c,d){function e(){if(l.readyState!==4)return null;try{g=m?l.response:l.responseText}catch(t){w(68719476736,"getResource(%s) exception: %s\n",a,t.message)}if(g!=null&&(l.status==200||!l.status&&g.length&&(p.location?p.location.protocol:"file:")=="file:"))w(2267742732288,"getResource(%s): returned %d bytes\n",a,g.length);else if(f=l.status||-1,w(2199023255552,"getResource(%s) error: %d\n",a,f),!l.status&&!pb){var q=a.match(/(^https?:\/\/[^/]+)(.*)/);q&&(pb=!0,qb("PCjs was unable to perform a cross-origin resource request to '"+
q[1]+"'.\n\nIf you're running an ad blocker, try adding '"+rb()+"' to your whitelist (or find a smarter ad blocker)."))}d&&d(a,g,f);return[g,f]}b=b===void 0?"text":b;c=c===void 0?!1:c;var f=0,g=null,h=null,k=p.resources;if(typeof k=="object"&&(g=k[a]))return d&&d(a,g,f),[g,f];if(c&&typeof k=="function")return k(a,function(q,t){d&&d(a,q,t)}),h;a=p.LOCALDISKS&&(p.location?p.location.hostname:"localhost").match(/^(.+\.local|localhost|0\.0\.0\.0|pcjs)$/)?a.replace(/^\/(diskettes|gamedisks|miscdisks|harddisks|decdisks|pcsigdisks|pcsig[0-9a-z]*-disks|private)\//,
"/disks/$1/").replace(/^\/discs\/([^/]*)\//,"/disks/cdroms/$1/"):a.replace(/^\/(disks\/|)(diskettes|gamedisks|miscdisks|harddisks|decdisks|pcsigdisks|pcsig[0-9a-z]*-disks|private)\//,"https://$2.pcjs.org/").replace(/^\/(disks\/cdroms|discs)\/([^/]*)\//,"https://$2.pcjs.org/");w(2199023255552,"getResource(%s)\n",a);if(Ia.ec&&a.indexOf("http")!=0){try{k=b=="arraybuffer"?null:"utf8",g=Ia.ec(a,k),k||(g=g.buffer,g.buffer&&(g=g.buffer))}catch(q){f=q.errno}if(g!==void 0)return d&&d(a,g,f),[g,f]}if(a.indexOf(Va)==
0&&(k=Ua(a)))return g=k.data,d&&d(a,g,f),[g,f];!a.match(/^[A-Z]:/i)&&a.indexOf("?")<0&&(a=encodeURI(a));if(p.XMLHttpRequest)var l=new p.XMLHttpRequest;else if(p.ActiveXObject)l=new p.ActiveXObject("Microsoft.XMLHTTP");else if(p.fetch)return fetch(a).then(function(q){switch(b){case "json":case "text":return q.text();case "arraybuffer":return q.arrayBuffer();default:throw Error("unsupported response type: "+b);}}).then(function(q){w(2267742732288,"getResource(%s): fetched %d bytes\n",a,q.length);d&&
d(a,q,f)}).catch(function(){w(68719476736,"getResource(%s) fetch error: %d\n",a,f);d&&d(a,g,f)}),h;var m=!1;k=typeof l.responseType==="string";c&&(l.onreadystatechange=e);if(b&&typeof b=="object"){k="";for(var r in b)b.hasOwnProperty(r)&&(k&&(k+="&"),k+=r+"="+encodeURIComponent(b[r]));k=k.replace(/%20/g,"+");w(2267742732288,"getResource(%s): posted %d bytes\n",a,k.length);l.open("POST",a,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(k)}else l.open("GET",a,c),b==
"arraybuffer"&&(k?(m=!0,l.responseType=b):l.overrideMimeType("text/plain; charset=x-user-defined")),l.send();c||(l.readyState=4,h=e());return h}
function sb(a,b){var c,d={fa:null,aa:null,ma:null,ya:null};if(b.charAt(0)=="["||b.charAt(0)=="{")try{var e,f;if(b.charAt(0)=="<")throw Error(b);if(b.indexOf("0x")<0&&b.indexOf("0o")<0&&b.substr(0,2)!='["'){b.indexOf('"values"')<0&&(b=b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,""));var g=JSON.parse(b)}else g=eval("("+b+")");d.ma=g.load;d.ya=g.exec;var h=g.width,k=g.values;h&&k&&(h==8?g.bytes=k:h==16?g.words=k:h==32?g.longs=k:g.data=k);if(e=g.bytes)d.fa=e;else if(e=g.words)for(d.fa=Array(e.length*
2),f=c=0;c<e.length;c++)d.fa[f++]=e[c]&255,d.fa[f++]=e[c]>>8&255;else if(e=g.longs)for(d.fa=Array(e.length*4),f=c=0;c<e.length;c++)d.fa[f++]=e[c]&255,d.fa[f++]=e[c]>>8&255,d.fa[f++]=e[c]>>16&255,d.fa[f++]=e[c]>>24&255;else(e=g.data)?d.Oa=e:d.fa=g;d.fa&&(d.fa.length?d.fa.length==1&&(x(d.fa[0]),d=null):(x("Empty resource: "+a),d=null));d.aa=g.symbols}catch(l){x("Resource data error ("+a+"): "+l.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=
parseInt(b[c],16);if(isNaN(f)){x("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.fa=e)}return d}function rb(){return p.location?p.location.protocol+"//"+p.location.host:"https://www.pcjs.org"}
function tb(){if(ub==null){var a=!1;if(p.localStorage)try{p.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a=p.localStorage.getItem("PCjs.localStorage")=="PCjs.localStorage",p.localStorage.removeItem("PCjs.localStorage")}catch(b){vb(b),a=!1}ub=a}return ub}function vb(a){w(1099511627776,"Local storage error: %s\n",a.message)}function wb(a){if(tb())try{var b=p.localStorage.getItem(a)}catch(c){vb(c)}return b}
function xb(a,b){if(tb())try{return p.localStorage.setItem(a,b),!0}catch(c){vb(c)}return!1}function yb(a){if(p.navigator){var b=p.navigator?p.navigator.userAgent:"";return a=="iOS"&&(!!b.match(/(iPod|iPhone|iPad)/)||p.navigator.platform==="MacIntel"&&p.navigator.maxTouchPoints>1)||a=="MSIE"&&!!b.match(/(MSIE|Trident)/)||b.indexOf(a)>=0}return!1}
function zb(a){if(!Ab){var b,c={};if(p.location){b||(b=p.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}Ab=c}return Ab[a]||Ab[a.toLowerCase()]}function Bb(a,b,c){function d(){--a;a>=0&&(b()||(a=0));a>0?setTimeout(d,0):c()}d()}
function Cb(a,b){function c(){b(d===100)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function Mb(a){Nb.init.push(a)}function Ob(a){w(274877906944,"%s\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.\n",a)}
function Pb(a){if((a=Nb[a])&&Qb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){Ob("An unexpected error occurred: "+c.message)}}function Rb(a){!Qb&&a?(Qb=!0,Sb&&Pb("init"),Tb&&Pb("show")):Qb=a}var Ab=null,Nb={init:[],show:[],exit:[]},Sb=!1,Tb=!1,Qb=!0,pb=!1,ub=null;function Ub(){Sb=!0;Pb("init",!0)}p.addEventListener&&p.addEventListener("load",Ub);function Vb(){Tb=!0;Pb("show",!0)}p.addEventListener&&p.addEventListener("pageshow",Vb);var Wb=yb("iOS")?"pagehide":yb("Opera")?"unload":"beforeunload";
function Xb(){Pb("exit",!0)}p.addEventListener&&p.addEventListener(Wb,Xb);
function z(a,b,c){this.type=a;b||(b={id:"",name:""});this.name=b.name;this.ub=b.comment;this.Rb=b;++Yb;this.id=this.id=b.id||"";this.exports={};this.L=this.bindings={};a=this.id.indexOf(".");a<0?(this.Va="PCjs",this.Db=this.id):(this.Va=this.id.substr(0,a),this.Db=this.id.substr(a+1));this.flags={ready:!1,Xa:!1,ob:!1,ud:!1,ca:!1,Kb:!1,error:!1};this.eb=null;this.flags.error=!1;this.da=c||0;this.G=this.B=this.J=this.I=null;u.components.push(this)}
function Zb(a,b,c){u.machines[a]&&b&&(u.machines[a][b]=c,b=="parms"&&typeof c=="string"&&(u.machines[a].config=eval("("+c+")")))}function $b(){return Date.now()||+new Date}function w(a){var b=Ba.apply(1,arguments),c=0;typeof a=="number"&&(c=a,a=b.shift());if(c>=68719476736&&c<=1099511627776){var d=!1;c==1099511627776?(d=!0,a="Error: "+a):c==549755813888?(d=!0,a="Warning: "+a):c==274877906944&&(d=!0);b=hb.apply(Wa,[a].concat(Aa(b))).trim();d?qb(b):console.log(b)}}function x(a){w(1099511627776,a)}
function qb(a){p.alert&&p.alert(a);console.log(a)}function ac(a){var b=!1;p.confirm&&(b=p.confirm(a));return b}
function bc(a,b){b=B("pdp10-control","",b.parentNode);for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++){var f=d[e];if(f.nodeType===1){var g=f.getAttribute("class");if(g)for(var h=g.split(" "),k=0;k<h.length;k++)switch(g=h[k],g){case "pdp10-binding":(g=C(f))&&g.binding!==void 0?a.sa(g.type,g.binding,f,g.value):g&&g.type=="description"||w(549755813888,'Component "%s" missing binding%s\n',a.toString(),g?" for "+g.type:""),k=h.length}}}}
function cc(a){var b,c=[];a&&(b=a.indexOf("."))>0&&(a=a.substr(0,b+1));var d=u.components;for(b=0;b<d.length;b++){var e=d[b];a&&e.id.indexOf(a)!=0||c.push(e)}return c}function dc(a,b){if(a!==void 0){var c;b&&(c=b.indexOf("."))>0&&(a=b.substr(0,c+1)+a);var d=u.components;for(c=0;c<d.length;c++)if(d[c].id===a)return d[c];d.length&&b!==!1&&w(549755813888,'Component ID "%s" not found\n',a)}return null}
function ec(a,b){var c=c===void 0?null:c;if(a!==void 0){var d;b&&(b=(d=b.indexOf("."))>0?b.substr(0,d+1):"");var e=u.components;for(d=0;d<e.length;d++)if(c)c==e[d]&&(c=null);else if(!(a!=e[d].type||b&&e[d].id.indexOf(b)))return e[d]}return null}function C(a){var b=null;if(a.getAttribute){if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(d){x(d.message+" ("+a+")")}}else if(b=a.config||null){a=a.id;var c=b.id;a&&c&&c.indexOf(".")<0&&(b.id=a+"."+c)}return b}
function B(a,b,c){b=b===void 0?"":b;c=c===void 0?Ja:c;var d=[];b&&(a+="-"+b,b!="machine"&&(a+="-object"));if(Ea)if(c.getElementsByClassName)d=c.getElementsByClassName(a);else{if(c.getElementsByTagName){b=c.getElementsByTagName("*");var e=new RegExp("(^| )"+a+"( |$)");a=0;for(c=b.length;a<c;a++)e.test(b[a].className)&&d.push(b[a])}}else for(a=Object.keys(u.machines),c=0;c<a.length;c++){e=a[c];var f=u.machines[e].config;if(f&&(f=f[b])){Array.isArray(f)||(f=[f]);f=za(f);for(var g=f.next();!g.done;g=
f.next())d.push({id:e,config:g.value})}}return d}
function fc(a){for(var b=!0,c=u.commands[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0];w(8796093022208,d.join(" "));var f=null;hc.indexOf(e)>=0&&(f=function(){return function(){fc(a)}}());var g=ic[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=ec(d[1],a);if(h)if(g=jc[e])b=g(h,d[2],d[3]);else{var k=h.exports;if(k&&(g=k[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){qb("Script error: '"+e+"' command "+(g?" failed":" not recognized"));
break}}c&&!c.length&&delete u.commands[a];return b}n=z.prototype;n.toString=function(){return this.name?this.name:this.id||this.type};
n.sa=function(a,b,c){switch(b){case "clear":return this.L[b]||(this.L[b]=c,c.onclick=function(d){return function(){d.L.print&&(d.L.print.value="")}}(this)),!0;case "print":return this.L[b]||(this.L[b]=c,c.value="",this.print=function(d,e){return function(f,g){f||(f="");if((g===void 0?0:g)==4398046511104&&f.slice(-4)=="...\n"){g=f.slice(0,-1);var h=e.value,k=h.lastIndexOf(g);h=k<0?h+(g+"\n"):h.substr(0,k)+(f.slice(0,-1)+".")+h.substr(k+g.length);h.length>8192&&(h=h.substr(h.length-4096));e.value=h}else e.value+=
f,f=e.value,f.length>8192&&(e.value=f.substr(f.length-4096));e.scrollTop=e.scrollHeight}}(this,c)),!0;default:return!1}};n.print=function(a,b){w(b===void 0?0:b,a)};function kc(a,b){a.flags.error=!0;a.A(274877906944,"%s\n",b)}function lc(a){return a.flags.error?(a.print(a.toString()+" error\n"),!0):!1}function mc(a,b){b&&(a.flags.ready?b():a.eb=b);return a.flags.ready}function nc(a){if(!a.flags.error&&(a.flags.ready=!0,a.flags.ready)){var b=a.eb;a.eb=null;b&&b()}}
function oc(a,b){a.flags.Xa&&(b?a.flags.ob=!0:b===void 0&&a.print(a.toString()+" busy\n"));return a.flags.Xa}function pc(a,b){if(a.flags.ob)return a.flags.Xa=!1,a.flags.ob=!1;if(a.flags.error)return a.print(a.toString()+" error\n"),!1;a.flags.Xa=b;return a.flags.Xa}n.Aa=function(){return this.flags.ca=!0};n.ra=function(a,b){b&&(this.flags.ca=!1);return!0};function qc(a,b){var c=b/4294967296|0;return(a&b)==(b|0)&&((a/4294967296|0)&c)==c}
function rc(a,b){b=b===void 0?0:b;b&1&&--b;b=b||a.da;return!qc(b,2199023255552)&&(qc(0xff000000000-(a.G?618475290624:0),b)||a.G&&qc(a.G.da,b))?!0:!1}n.A=function(a){var b=Ba.apply(1,arguments),c=0;typeof a=="number"&&(c=a||4398046511104,a=b.shift(),qc(c,68719476736)?a=(this.id||this.type||"log")+": "+a:qc(c,137438953472)&&(a=this.type+": "+a));rc(this,c)&&(b=hb.apply(Wa,[a].concat(Aa(b))),this.G&&this.G.message?this.G.message(b,c):this.print(b,c))};
var hc=["hold","sleep","wait"],ic={alert:function(a){qb(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},jc={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}},Yb=0;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});
Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if(typeof this!="function")throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
function sc(a,b,c){z.call(this,a,b,c);this.V=+b.base||16;this.O=32;this.W=["{","}"];this.ta=["[","]"];this.Sa=this.H=0;this.X=!1;this.F=-1;this.C=[];this.g={}}xa(sc,z);sc.prototype.rb=function(){return-1};sc.prototype.sb=function(){};
function tc(a,b,c,d){if(c)if(b){a.F<0&&a.C.length&&(a.F=0);if(a.F<0||b!=a.C[a.F])a.C.splice(0,0,b),a.F=0;a.F--}else a.X?b="end":b=a.C[a.F+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if(g=='"'||g=="'")e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(lb(b.substring(c,f))),c=f+1}}return a}function uc(a,b,c){if(a.O<=32)return b&c;b=D(a,b,0,!0);c=D(a,c,0,!0);return((b/vc|0)&(c/vc|0))*vc+((b&c)>>>0)}
function wc(a,b,c){if(a.O<=32)return b^c;b=D(a,b,0,!0);c=D(a,c,0,!0);return((b/vc|0)^(c/vc|0))*vc+((b^c)>>>0)}sc.prototype.Hb=function(a,b){return a*b};function D(a,b,c,d){var e=b;c=c||a.O;if(d)if(c==32)e=b>>>0;else if(c<32)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),b<0||b>=a)e=b%a,e<0&&(e+=a)}else c<=32?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
function xc(a,b,c,d){for(d=d===void 0?-1:d;d--&&c.length;){var e=c.pop();if(b.length<2)return!1;var f=b.pop();var g=b.pop();switch(e){case "*":g=a.Hb(g,f);break;case "/":if(!f)return!1;g=Math.trunc(g/f);break;case "^/":if(!f)return!1;g%=f;break;case "+":g+=f;break;case "-":g-=f;break;case "<<":g<<=f;break;case ">>":g>>=f;break;case ">>>":g>>>=f;break;case "<":g=g<f?1:0;break;case "<=":g=g<=f?1:0;break;case ">":g=g>f?1:0;break;case ">=":g=g>=f?1:0;break;case "==":g=g==f?1:0;break;case "!=":g=g!=f?
1:0;break;case "&":g=uc(a,g,f);break;case "!":case "|":e=a;e.O<=32?g|=f:(g=D(e,g,0,!0),f=D(e,f,0,!0),g=(g/vc|0|f/vc|0)*vc+((g|f)>>>0));break;case "^!":g=wc(a,g,f);break;case "&&":g=g&&f?1:0;break;case "||":g=g||f?1:0;break;case ",,":g=D(a,g,18,!0)*262144+D(a,f,18,!0);break;case "^_":e=="^_"&&(f=35-(f&255));f&&(g=D(a,g,0,!0),g=f>0?g*Math.pow(2,f):Math.trunc(g/Math.pow(2,-f)));break;default:return!1}b.push(D(a,g))}return!0}
function yc(a,b,c,d,e,f){var g,h=!1,k=0,l=[],m=[],r=a.V;for(a.V=e;c<d;){var q=b[c++].trim();var t=c<d?b[c++]:"";if(q)var E=zc(a,q,void 0,f,k);else if(t=="{"){q=1;for(E=c;c<d;)if(c++,t=c<b.length?b[c++]:"",t=="{")q++;else if(t=="}"&&!--q)break;E=yc(a,b,E,c-1,a.V,f);E!=null&&k&&(E=Ac(a,E,k));q=c<d?b[c++].trim():"";t=c<d?b[c++]:""}else{if(t==" ")continue;if(t=="^B"){a.V=2;continue}if(t=="^O"){a.V=8;continue}if(t=="^D"){a.V=10;continue}if(!(k&-1073741824)){if(t=="+")continue;if(t=="-"){k=k<<2|1;continue}if(t==
"~"||t=="^-"){k=k<<2|2;continue}if(t=="^L"){k=k<<2|3;continue}}h=!0;break}if(E===void 0)if(f)f.push(q),E=0;else{h=!0;f=[];break}l.push(D(a,E));if(t==" ")if(c<b.length-1&&!b[c])c++,t=b[c++];else{h=!0;break}if(!t)break;k=a.W[0]=="<"?Bc:Cc;if(!k[t]){h=!0;break}m.length&&k[t]<=k[m[m.length-1]]&&xc(a,l,m,1);m.push(t);a.V=t=="^_"?10:e;k=0}if(h||!xc(a,l,m)||l.length!=1)h=!0;h?f||a.A("parse error (%s)\n",q||t):g=l.pop();a.V=r;return g}
function Dc(a,b,c,d,e){for(var f;(f=b.indexOf(c))>=0;){for(var g=0,h=f+1,k=e;h<b.length;){var l=b[h++];if(l==c){k=-1;break}if(!k)break;k--;l=l.charCodeAt(0);d==7?l&=127:l=l-32&63;g=D(a,g*Math.pow(2,d)+l,d*e,!0)}if(k>=0){a.A("parse error (%s%s%s)\n",c,b,c);return}b=b.substr(0,f)+F(a,g,-1)+b.substr(h)}return b}
function Ec(a,b,c){var d=void 0,e=c===!1;c=Array.isArray(c)?c:void 0;if(b){a.W[0]!="{"&&(b=b.split(a.W[0]).join("{").split(a.W[1]).join("}"));b=Dc(a,b,'"',7,5);if(!b)return d;b=Dc(a,b,"'",6,6);if(!b)return d;a.V!=16&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=yc(a,b,0,b.length,a.V,c);d!==void 0&&e&&Fc(a,null,d)}return d}
function Ac(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-D(a,b);break;case 2:b=wc(a,b,-1);break;case 3:for(d=35;d>=0&&!uc(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}
function zc(a,b,c,d,e){e=e===void 0?0:e;var f=Array.isArray(d)?d:void 0;if(b!=void 0){var g=a.rb(b);if(g>=0)g=a.sb(g);else if(g=b,a.g[g]?g=a.g[g].value:(g=g.substr(0,6),g=a.g[g]&&a.g[g].value),g!=void 0){var h=a.g[b]&&a.g[b].Jb;h&&(f?f.push(h):(f=Ec(a,h,d),f!==void 0?g+=f:(d||a.A("undefined %s: %s (%s)\n",c||"value",b,h),g=void 0)))}else g=Xa(b,b.length>1||a.V>10?a.V:10);g!=void 0?g=D(a,Ac(a,g,e)):d||a.A("invalid %s: %s\n",c||"value",b)}else d||a.A("missing %s\n",c||"value");return g}
function Fc(a,b,c){var d=!1;if(c!==void 0){d=!0;var e=a.V==8?F(a,c,a.O,8,1)+"  "+c+".":F(a,c,a.O,16,1)+"  "+F(a,c,a.O,8,1)+"  "+F(a,c,a.O,2,a.O<=32?8:6)+"  "+c+".";c>=32&&c<127&&(e+=" '"+String.fromCharCode(c)+"'")}a.A("%s%s\n",b!=null?b+": ":"",e);return d}function Gc(a){var b=a.g;a.g={};return b}function Hc(a,b){var c=0;if(a.g){if(b)return Fc(a,b,a.g[b]&&a.g[b].value);b=Object.keys(a.g);b.sort();for(var d=0;d<b.length;d++)Fc(a,b[d],a.g[b[d]].value),c++}return c>0}
function F(a,b,c,d,e){c=c===void 0?0:c;e=e===void 0?0:e;switch((d===void 0?0:d)||a.V){case 2:(a=c>0?c:0)?a>36&&(a=36):(a=Math.abs(b),a=a<=255?8:a<=262143?18:36);b=Ya(b,2,a,"",e);break;case 8:b=Za(b,c>0?(c+2)/3|0:0,!!e);break;case 10:b=$a(b,c>0?Math.ceil(c*.3):0);break;default:b=ab(b,c>0?c+3>>2:0,!!e)}return c=c<0?b.replace(/^0+([0-9A-F]+)$/i,"$1"):b}
var Cc={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"^_":19,"{":20,"}":20},Bc={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,"^_":19,"{":20,"}":20},vc=4294967296;v.cpu=2;v.trap=4;v.fault=8;v["int"]=16;v.bus=32;v.memory=64;v.mmu=128;v.rom=256;v.device=512;v.panel=1024;v.keyboard=2048;
v.key=4096;v.paper=8192;v.read=16384;v.write=32768;v.serial=65536;v.timer=131072;v.speaker=262144;v.computer=524288;
function Ic(a,b){z.call(this,"Panel",a,1024);this.M=this.N=0;this.W=b;this.u=this.K=this.v=this.C=0;this.O=this.P=-1;this.R=this.S=this.H=!1;this.U=Jc;this.F={};this.g={START:[1,1,!0,!1,this.cc],STEP:[1,1,!1,!1,this.dc],ENABLE:[1,1,!1,!1,this.Yb],CONT:[1,1,!0,!1,this.Wb],DEP:[0,0,!0,!1,this.Xb],EXAM:[1,1,!0,!1,this.Zb],LOAD:[1,1,!0,!1,this.ac],TEST:[0,0,!0,!1,this.$b]};for(a=0;a<22;a++)this.g["S"+a]=[0,0,!1,!1,this.bc,a];this.G=this.B=this.J=this.I=null;this.exports={hold:this.Tb,toggle:this.qc,reset:this.lc,
set:this.oc};nc(this)}xa(Ic,z);n=Ic.prototype;n.reset=function(a){this.stop();a&&Mc(this,this.C=0)};
n.sa=function(a,b,c,d){if(this.I&&this.I.sa(a,b,c,d)||this.B&&this.B.sa(a,b,c,d)||this.G&&this.G.sa(a,b,c,d))return!0;switch(b){case "PC":return this.L[b]=c,this.N++,!0;default:return a=="led"||a=="rled"?(this.L[b]=c,this.F[b]=d?1:0,this.N++,!0):a=="switch"?(this.g[b]===void 0&&(this.g[b]=[d?1:0,d?1:0]),this.L[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(e,f){return function(){Nc(e,f)}}(this,b),a.onmouseup=a.onmouseout=function(e,f){return function(){Oc(e,f)}}(this,b),a.ontouchstart=
function(e,f){return function(g){Nc(e,f);g.preventDefault()}}(this,b),a.ontouchend=function(e,f){return function(){Oc(e,f)}}(this,b),!0):z.prototype.sa.call(this,a,b,c,d)}};n.za=function(a,b,c,d){this.I=a;this.J=b;this.B=c;this.G=d;Pc(this);Qc(this)};n.Aa=function(a,b){if(!b)if(this.W&&Rc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};n.ra=function(a){return a?this.save():!0};n.save=function(){var a=new G(this);a.set(0,[this.u,this.C,this.v]);return a.data()};
n.restore=function(a){if(a=a[0])Sc(this,this.u=a[0]),Mc(this,this.C=a[1]),Tc(this,a[2]);return!0};n.lc=function(){for(var a in this.g){var b=this.g[a];b[1]=b[0]}Qc(this);return!0};function Uc(a,b,c){if(a=a.L[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function Pc(a,b){for(var c in a.F)Uc(a,c,b!=null?b:a.F[c])}function Vc(a,b,c){if(a=a.L[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function Qc(a){for(var b in a.g)Vc(a,b,a.g[b][1])}
n.Tb=function(a,b,c){if(Nc(this,b)){if(c){var d=this;setTimeout(function(){Oc(d,b);a&&a()},+c);return!1}Oc(this,b)}return!0};n.oc=function(a,b){if(a=="SR")return Tc(this,Xa(b,8));var c=this.g[a];return c?(c[1]=+b?1:0,Vc(this,a,c[1]),!0):!1};n.qc=function(a){return Nc(this,a)?(Oc(this,a),!0):!1};function Nc(a,b){var c=a.g[b];return c?(Vc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b!=Wc&&(a.R=b==Xc,a.S=b==Yc),!0):!1}
function Oc(a,b){var c=a.g[b];c&&(c[2]&&c[3]&&(Vc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}n.cc=function(a){a||this.B.flags.T||(I(this.B,this.u),this.g[Zc]&&this.g[Zc][1]&&$c(this.B))};n.dc=function(){};n.Yb=function(a){a||J(this.B)};
n.Wb=function(a){if(!a&&!this.B.flags.T)if(this.g[Zc]&&this.g[Zc][1])$c(this.B);else{if((a=this.G)&&!oc(a,!0))pc(a,!0),ad(a,0,null),pc(a,!1);else try{var b=this.B.ab(1);b>0&&(bd(this.B,b),cd(this.B,b,!0),dd(this.B,b))}catch(c){typeof c!="number"&&(b=c,kc(this.B,b.stack||b.message))}this.stop();this.I&&K(this.I)}};n.Xb=function(a){a&&!this.B.flags.T&&(this.R&&ed(this),a=Mc(this,this.C=this.v),this.U==Jc?fd(this.J,this.u,a):this.B.j(this.u,a))};
n.Zb=function(a){if(!a&&!this.B.flags.T){var b;this.S&&ed(this);this.U==Jc?b=gd(this.J,this.u):b=this.B.i(this.u);Mc(this,this.C=b)}};n.ac=function(a){a||this.B.flags.T||Sc(this,this.v)};n.$b=function(a){a?(this.H=!0,Pc(this,!0)):(this.H=!1,Pc(this),Tc(this,0))};n.bc=function(a,b){this.v=a?this.v|1<<b:this.v&~(1<<b)};function ed(a){var b=1,c=a.J.v;a.g[Wc]&&a.g[Wc][1]||(b=-b);Sc(a,a.u&~c|a.u+b&c)}
function Sc(a,b){a.u=b&a.J.v;if(a.O!==a.u){a.O=a.u;b=a.O;for(var c=0;c<22;c++){var d=a,e="A"+c,f=b&1<<c;d.F[e]=f;d.H||Uc(d,e,f)}}}function Mc(a,b){a.K=b%68719476736;if(a.P!==a.K){a.P=a.K;b=a.P;for(var c=0;c<16;c++){var d=a,e="D"+c,f=b&1<<c;d.F[e]=f;d.H||Uc(d,e,f)}}return a.K}function Tc(a,b){a.v=b|0;for(b=0;b<22;b++)a.g["S"+b][1]=a.v&1<<b?1:0;Qc(a);return!0}n.stop=function(){Sc(this,this.B.u)};
function Rc(){for(var a=B("pdp10","panel"),b=0;b<a.length;b++){var c=a[b],d=C(c),e=dc(d.id,!1);e||(e=new Ic(d,!0));bc(e,c)}}var Jc=7,Xc="DEP",Zc="ENABLE",Yc="EXAM",Wc="STEP";Mb(Rc);function hd(a,b,c){z.call(this,"Bus",a,32);this.B=b;this.G=c;this.H=+a.busWidth||18;this.K=1<<this.H;this.v=this.K-1;this.u=Math.log2(16384);this.F=this.K/16384|0;this.C=0;this.g=[];a=new id(this);jd(a,this.G);this.g=Array(this.F);for(b=0;b<this.F;b++)this.g[b]=a;nc(this)}xa(hd,z);n=hd.prototype;n.reset=function(){};
n.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};n.ra=function(a){return a?this.save():!0};n.save=function(){for(var a=new G(this),b=a.set,c=0,d=[],e=0;e<this.F;e++){var f=this.g[e];if(f.qb||f.Sb){d[c++]=e;var g=c++;a:if(f=f.save()){for(var h=0,k=0,l=[];h<f.length;){for(var m=f[h],r=h+1;r<f.length&&f[r]===m;)r++;l[k++]=r-h;l[k++]=m;h=r}if(l.length<f.length){f=l;break a}}d[g]=f}}b.call(a,0,d);return a.data()};
n.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<4096){for(var e=0,f=Array(4096),g=0;g<d.length-1;)for(var h=d[g++],k=d[g++];h--;)f[e++]=k;d=f}e=this.g[c];if(!e||!e.restore(d)){x("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function kd(a,b,c,d){for(var e=b,f=c,g=e>>>a.u;f>0&&g<a.g.length;){var h=a.g[g],k=g*16384,l=16384-(e-k);l>f&&(l=f);if(h&&h.size){if(h.type==d){if(e+f<=h.D)return h.Za+=h.D-e,h.D=e,!0;if(e>=h.D+h.Za){l=h.size-(e-k);l>f&&(l=f);h.Za=e-h.D+l;e=k+16384;f-=l;g++;continue}}return ld(a,md,e,f)}e=new id(a,e,l,16384,d);jd(e,a.G,h);a.g[g++]=e;e=k+16384;f-=l}return f<=0?(a.A(137438953472,"Added %dKb %s at %o\n",c>>10,nd[d],b),!0):ld(a,od,b,c)}
function gd(a,b){var c=a.g[(b&a.v)>>>a.u];a.C++;b=c.C(b&16383,b);a.C--;return b}function fd(a,b,c){var d=a.g[(b&a.v)>>>a.u];a.C++;d.G(c,b&16383,b);a.C--}function pd(a,b){if(!a.C)throw a.G&&a.G.A(9,"memory fault on %s\n",F(a.G,b)),J(a.B),-1;}function ld(a,b,c,d){a.A(1099511627776,"Memory block error (%d: %#x,%#x)\n",b,c,d);return!1}var md=1,od=2;function qd(a){z.call(this,"Device",a,512)}xa(qd,z);n=qd.prototype;n.za=function(a,b,c,d){this.J=b;this.I=a;this.B=c;this.G=d;nc(this)};
n.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};n.ra=function(a){return a?this.save():!0};n.reset=function(){};n.save=function(){return(new G(this)).data()};n.restore=function(){return!0};Mb(function(){for(var a=B("pdp10","device"),b=0;b<a.length;b++){var c=a[b];var d=C(c);switch(d.type){case "default":d=new qd(d),bc(d,c)}}});
function id(a,b,c,d,e){this.J=a;this.id=rd+=2;this.offset=0;this.D=b;this.Za=c;this.size=d||0;this.type=e||sd;this.I=e==td;this.g=null;this.i=this.C=this.tb;this.j=this.G=this.$a;this.B=this.u=0;jd(this);this.qb=this.Sb=!1;if(this.size){a=this.v=Array(this.size);for(b=0;b<a.length;b++)a[b]=0;(a=ud)||(a=vd);wd(this,a);xd(this,a)}else a=vd,wd(this,a),xd(this,a)}n=id.prototype;n.init=function(a){this.D=a};n.save=function(){return this.v};
n.restore=function(a){return a&&this.size==a.length?(this.v=a,this.qb=!0):!1};function wd(a,b,c){c&&a.B||(a.i=b[0]||a.tb);if(c||c===void 0)a.C=b[0]||a.tb}function xd(a,b,c){c&&a.u||(a.j=!a.I&&b[1]||a.$a);if(c||c===void 0)a.G=b[1]||a.$a}n.Ra=function(a,b){b?this.u++===0&&xd(this,yd,!1):this.B++===0&&wd(this,yd,!1)};function zd(a,b){b?--a.u===0&&(a.j=a.I?a.$a:a.G):--a.B===0&&(a.i=a.C)}function jd(a,b,c){a.g=b;a.B=a.u=0;c&&((a.B=c.B)&&wd(a,yd,!1),(a.u=c.u)&&xd(a,yd,!1))}
n.tb=function(a,b){this.g&&this.g.A(64,"attempt to read invalid address %s\n",F(this.g,b));pd(this.J,b);return-1};n.$a=function(a,b,c){this.g&&this.g.A(64,"attempt to write %s to invalid addresses %s\n",F(this.g,a),F(this.g,c));pd(this.J,c)};n.jc=function(a){return this.v[a]};n.tc=function(a,b){this.v[b]!=a&&(this.v[b]=a,this.qb=!0)};n.fc=function(a,b){if(this.g&&this.D!=null){var c=this.g;Ad(c,this.D+a,2,c.R)&&Bd(c,!1)}return this.C(a,b)};
n.sc=function(a,b,c){if(this.g&&this.D!=null){var d=this.g;Ad(d,this.D+b,2,d.N)&&Bd(d,!1)}this.I?this.$a(a,b,c):this.G(a,b,c)};var sd=0,td=2,nd=["NONE","RAM","ROM"],rd=0,vd=[],ud=[id.prototype.jc,id.prototype.tc],yd=[id.prototype.fc,id.prototype.sc];
function Cd(a,b){z.call(this,"CPU",a,2);b=+a.cycles||b;var c=+a.multiplier||1;this.ib=0;this.lb=b;this.na=c;this.jb=Math.round(this.lb/1E4)/100;this.ia=this.jb*this.na;this.kb=this.Ja=this.oa=this.bb=0;this.flags.T=this.flags.hb=!1;this.flags.ha=a.autoStart;typeof this.flags.ha=="string"&&(this.flags.ha=this.flags.ha=="true");this.flags.Ta=!1;this.Ha=this.ta=0;this.Ia=+a.csStart;this.pa=+a.csInterval;this.ua=+a.csStop;this.S=[];this.Eb=this.mc.bind(this);this.X=this.O=this.W=this.P=this.N=this.Ga=
this.U=this.va=this.mb=this.ea=0;this.Na=null;nc(this)}xa(Cd,z);n=Cd.prototype;n.za=function(a,b,c,d){this.I=a;this.J=b;this.G=d;this.Na=a.F;for(a=0;a<Dd.length;a++)(b=this.L[Dd[a]])&&this.I.sa("",Dd[a],b);nc(this)};n.reset=function(){};n.save=function(){return null};n.restore=function(){return!1};
n.Aa=function(a,b){var c=Ed(this.I,"autoStart");c!=null?this.flags.ha=c=="true"?!0:c=="false"?!1:!!c:this.flags.ha==null&&(this.flags.ha=!this.G&&this.L.run===void 0);if(!b){if(a){Fd(this);if(!this.restore(a))return!1;Gd(this)}else this.reset();this.G?this.G.init(this.flags.ha):this.A(137438953472,"No debugger detected\n");this.flags.ha||this.A("CPU will not be auto-started %s\n",this.Na?"(click Run to start)":"(type 'go' to start)")}return!0};n.ra=function(a){return a?this.save():!0};
n.ha=function(){return this.flags.T?!0:this.flags.ha?($c(this),!0):!1};function Gd(a){a.Ia===void 0&&(a.Ia=0);a.pa===void 0&&(a.pa=-1);a.ua===void 0&&(a.ua=-1);a.flags.Ta=a.Ia>=0&&a.pa>0;a.flags.Ta&&(a.Ha=0,a.ta=a.Ia-a.X)}function dd(a,b){if(a.flags.Ta){var c=!1;a.Ha|=0;a.ta-=b;a.ta<=0&&(a.ta+=a.pa,c=!0);a.ua>=0&&a.ua<=Hd(a)&&(a.pa=a.ua=-1,Gd(a),J(a),c=!0);c&&a.A("%d cycles: checksum=%x\n",Hd(a),a.Ha)}}
n.sa=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.L[b]=c,!0;case "run":return this.L[b]=c,c.onclick=function(){var e;if(e=d.I)if(e=d.I,e.flags.ca)e=!0;else{var f=null,g,h=cc(e.id);for(g=0;g<h.length&&(f=h[g],f===e||f.flags.ready);g++);if(g==h.length)for(g=0;g<h.length&&(f=h[g],f===e||f.flags.ca);g++);g==h.length&&(f=e);qb("The "+f.type+" component ("+f.id+") is not "+(f.flags.ready?"powered yet":"ready yet"+(f.eb?" (waiting for notification)":""))+".");e=!1}e&&(d.flags.T?
J(d):$c(d))},!0;case "speed":return this.L[b]=c,!0;case "setSpeed":return this.L[b]=c,c.onclick=function(){Id(d,d.na<<1,!0)},c.textContent=this.ia.toFixed(2)+"Mhz",!0}return!1};function cd(a,b,c){a.X+=b;c&&(a.W=a.P=0)}function Jd(a,b){var c=1;b&&a.na>1&&a.ea&&(c=a.ea/a.jb);a.kb=Math.round(1E3/ae);a.Ja=Math.floor(a.lb/ae*c);b||(a.oa=a.Ja);a.bb=0}function Hd(a){return a.X+a.O+a.W-a.P}function Fd(a){a.ea=0;a.mb=0;a.X=a.O=a.W=a.P=0;Gd(a);Id(a,1)}
function Id(a,b,c){var d=!1;if(b!==void 0){a.ea/a.ia<.8?b=1:d=!0;a.na=b;b=a.jb*a.na;if(a.ia!=b){a.ia=b;b=a.ia.toFixed(2)+"Mhz";var e=a.L.setSpeed;e&&(e.textContent=b);a.A("target speed: %s\n",b)}c&&a.I&&be(a.I)}cd(a,a.O);a.O=0;a.N=$b();a.U=0;Jd(a);return d}function ce(a,b){for(var c=a.S.length-1;c>=0;c--){var d=a.S[c];d[0]<0||b>d[0]&&(b=d[0])}return b}function bd(a,b){for(var c=a.S.length-1;c>=0;c--){var d=a.S[c];d[0]<0||(d[0]-=b,d[0]<=0&&(d[0]=-1,d[1]()))}}
function de(a,b){var c=a.W-=a.P;a.P=0;b&&(a.W=0);return c}
n.mc=function(){if(this.flags.T){this.bb>=this.lb&&Jd(this,!0);this.va=0;this.Ga=$b();if(this.U){var a=this.Ga-this.U;a>this.kb&&(this.N+=a,this.N>this.Ga&&(this.N=this.Ga))}try{do{var b=ce(this,this.flags.Ta?1:this.Ja);try{this.ab(b)}catch(f){if(typeof f!="number")throw f;}b=de(this,!0);this.va+=b;this.O+=b;dd(this,b);bd(this,b);this.oa-=b;if(this.oa<=0){this.oa+=this.Ja;++this.mb>=ee&&(this.I&&K(this.I),this.mb=0);break}}while(this.flags.T)}catch(f){J(this);this.I&&this.I.stop($b(),Hd(this));kc(this,
f.stack||f.message);return}if(this.flags.T){a=setTimeout;b=this.Eb;this.U=$b();var c=this.kb;this.va&&(c=Math.round(c*this.va/this.Ja));c-=this.U-this.Ga;var d=this.O,e=this.U-this.N;e&&(this.ea=Math.round(d/(e*10))/100,e>=864E5&&(this.X=0,Id(this)));if(c<0||this.ea<this.ia)c<-1E3&&(this.N-=c),c=0;this.bb+=this.va;this.U+=c;a(b,c)}}};
function $c(a,b){if(!lc(a))if(a.flags.T)a.A("%s busy\n",a.toString());else{Id(a);a.flags.T=!0;a.flags.hb=!0;var c=a.L.run;c&&(c.textContent="Halt");a.I&&(b&&be(a.I,!0),a.I.start(a.N,Hd(a)));a.G||a.A(137438953472,"Started\n");setTimeout(a.Eb,0)}}n.ab=function(){return 0};function J(a,b){var c=!1;if(a.flags.T){de(a);cd(a,a.O);a.O=0;a.flags.T=!1;if(c=a.L.run)c.textContent="Run";a.I&&a.I.stop($b(),Hd(a));c=!0;a.G||a.A(137438953472,"Stopped\n")}a.flags.complete=b;return c}var ae=30,ee=15,Dd=["power","reset"];
function fe(a){var b=+a.model||1001;Cd.call(this,a,1E6);this.model=b;this.Z=this.Sa=+a.addrReset||0;this.Qb=ge.bind(this);this.C=L.bind(this);this.Ca=null;this.zb=[];this.flags.complete=!1}xa(fe,Cd);n=fe.prototype;n.za=function(a,b,c,d){Cd.prototype.za.call(this,a,b,c,d)};
n.reset=function(){this.A(137438953472,"Model %s\n",this.model);this.flags.T&&J(this);this.Ka=this.La=this.g=this.K=0;this.u=this.Z=this.Sa;this.M=this.R=-1;this.H=this.v=0;this.nb=[0,0];this.wa=[0,0];this.la=[0,0];this.xa=[0,0];this.Ba=this.u;this.F=0;this.i=this.hc;this.j=this.uc;this.Ca=null;Fd(this);this.flags.error=!1;Cd.prototype.reset.call(this)};
n.save=function(){var a=new G(this);a.set(0,[this.g,this.K,this.Ka,this.La,this.u,this.R,this.M,this.v,this.F,this.Z,this.Ba,this.Sa]);a.set(1,[]);a.set(2,[this.X,this.na,this.flags.ha]);for(var b=a.set,c=[],d=this.Ca;d;)c.push(d.rc),d=d.next;b.call(a,3,c);b=a.set;c=[];for(d=0;d<this.S.length;d++)c.push(this.S[d][0]);b.call(a,4,c);return a.data()};
n.restore=function(a){var b=za(a[0]);this.g=b.next().value;this.K=b.next().value;this.Ka=b.next().value;this.La=b.next().value;this.u=b.next().value;this.R=b.next().value;this.M=b.next().value;this.v=b.next().value;this.F=b.next().value;this.Z=b.next().value;this.Ba=b.next().value;this.Sa=b.next().value;b=a[2];this.X=b[0];Id(this,b[1]);this.flags.ha=b[2];b=a[3];for(var c=b.length-1;c>=0;c--){var d;a:{for(d=0;d<this.zb.length;d++){var e=this.zb[d];if(e.rc===b[c]){d=e;break a}}d=null}d&&(d.next=this.Ca,
this.Ca=d)}a=a[4];for(b=0;b<this.S.length&&b<a.length;b++)this.S[b][0]=a[b];return!0};function he(a,b){a.v=a.v&-254049|b&254048;a.v|=b&4096;b&2048?a.v&4096||(a.v|=2048):a.v&=-2049}function ie(a,b){var c=a.u;a.u=(c+b)%262144;return c}function je(a){return a.R>=0?a.R:a.K&4194304?a.Z:a.u}function I(a,b){a.K=0;a.R=-1;a.u=b%262144}n.hc=function(a){var b=this.J;a=this.Ba=a;return b.g[(a&b.v)>>>b.u].i(a&16383,a)};n.uc=function(a,b){var c=this.J;a=this.Ba=a;c.g[(a&c.v)>>>c.u].j(b,a&16383,a);return b};
n.ab=function(a){this.flags.complete=!0;var b=this.G?ke(this.G)?1:this.flags.hb?-1:0:0,c=a?this.flags.hb?0:1:-1;this.flags.hb=!1;this.W=this.P=a;this.F=this.F&-5|(b?4:0);do{if(this.F){if(this.F&4){if(le(this.G,je(this),c)){J(this);break}++b||(this.F&=-5);c||c++}if(a=this.F&11)this.F&2?this.Ca||(this.F&=-3):this.F&1&&this.F++,a=!1;if(a){if(this.F&4&&le(this.G,je(this),c)){J(this);break}if(c<0)break}}this.F&=15;this.K&4194304?this.K=this.Ka=this.i(this.g):this.R>=0?(this.K=this.La=this.i(this.R),this.R=
-1):(this.K=this.La=this.i(this.Z=this.u),this.u=(this.u+1)%262144);this.K&=8388607;this.g=this.K&262143;if(a=this.K>>18&15)this.g=this.g+(this.Ka=this.i(a))&262143;a=this.K&4194304?-1:this.La/8388608|0;a>=0&&this.Qb(a);this.P--}while(this.P>0);return this.flags.complete?this.W-this.P:this.flags.complete===!1?-1:0};Mb(function(){for(var a=B("pdp10","cpu"),b=0;b<a.length;b++){var c=a[b],d=C(c);d=new fe(d);bc(d,c)}});function ge(a){me[a>>4].call(this,a,a&15)}function O(a){this.C(a)}
function ne(){var a=0,b=this.i(this.g),c=b>>24&63;var d=(b/1073741824&63)-c;d<0&&(a++,d=36-c,d<0&&(d=100-c));b=d*1073741824+(c<<24)+(b&16777215);a&&(b=(b+a)%68719476736);this.j(this.g,b)}function oe(a,b){a=this.i(this.g);if(this.M<0)this.M=a,this.K=this.g|4194304;else{var c=this.M/1073741824&63,d=this.M>>24&63;a=c+d<32?(a>>c&(1<<d)-1)>>>0:Math.trunc(a/Math.pow(2,c))%Math.pow(2,d);this.j(b,a);this.v&=-8193;this.M=-1}}
function pe(a,b){a=this.i(this.g);if(this.M<0)this.M=a,this.K=this.g|4194304;else{var c=this.M/1073741824&63,d=this.M>>24&63;b=this.i(b)%Math.pow(2,d)*Math.pow(2,c)%68719476736;a=a-a%Math.pow(2,c+d)+b+a%Math.pow(2,c);this.j(this.g,a);this.v&=-8193;this.M=-1}}function qe(a,b){this.j(b,this.i(this.g))}function re(a,b){this.j(b,this.g)}function se(a,b){this.j(this.g,this.i(b))}function te(a,b){this.j(b,0)}function ue(a,b){this.j(b,68719476735-this.i(b))}function ve(a,b){this.j(b,68719476735)}
function we(a,b){var c=this.i(this.g),d=this.i(b);this.j(b,xe(a,d,c)+(c-(c&262143)))}function ye(a,b){var c=this.i(b);this.j(b,xe(a,c,0))}function ze(a,b){b=this.i(b);var c=this.i(this.g);this.j(this.g,xe(a,c,b)+(b-(b&262143)))}function Ae(a,b){var c=this.i(this.g),d=c;if(a&=384)switch(d-=d&262143,a){case 256:d+=262143;break;case 384:d+=c>34359738367?262143:0}c=d;this.j(this.g,c);b&&this.j(b,c)}function Be(a,b){var c=(this.i(this.g)&262143)*262144,d=this.i(b);this.j(b,xe(a,d,c)+c)}
function Ce(a,b){var c=this.g*262144,d=this.i(b);this.j(b,xe(a,d,c)+c)}function De(a,b){b=(this.i(b)&262143)*262144;var c=this.i(this.g);this.j(this.g,xe(a,c,b)+b)}function Ee(a,b){var c=this.i(this.g),d=(c&262143)*262144;c=xe(a,c,d)+d;this.j(this.g,c);b&&this.j(b,c)}function Fe(a,b){var c=this.i(this.g)&262143,d=this.i(b);this.j(b,Ge(a,d,c)+c)}function He(a,b){var c=this.i(b);this.j(b,Ge(a,c,this.g)+this.g)}function Ie(a,b){b=this.i(b)&262143;var c=this.i(this.g);this.j(this.g,Ge(a,c,b)+b)}
function Je(a,b){var c=this.i(this.g),d=c;if(a&=384)switch(d&=262143,a){case 256:d+=68719214592;break;case 384:d+=c>131071?68719214592:0}c=d;this.j(this.g,c);b&&this.j(b,c)}function Ke(a,b){var c=this.i(this.g)/262144|0,d=this.i(b);this.j(b,Ge(a,d,c)+c)}function Le(a,b){var c=this.i(b);this.j(b,Ge(a,c,0))}function Me(a,b){b=this.i(b)/262144|0;var c=this.i(this.g);this.j(this.g,Ge(a,c,b)+b)}function Ne(a,b){var c=this.i(this.g),d=c/262144|0;c=Ge(a,c,d)+d;this.j(this.g,c);b&&this.j(b,c)}
function P(a){Oe[a&7].call(this,a,a>>3&127)}function Pe(){}function Qe(){}function L(a){this.A("undefined opcode: %o\n",a);ie(this,-1);J(this)}function Re(a){a>34359738367&&(a!=34359738368?a=68719476736-a:this.v|=163840);return a}function Q(a,b){var c=(a+b)%68719476736;Se.call(this,a,b,c);return c}
function Te(a,b,c){var d=!1,e=!1;if(c===void 0){if(!a)return this.v|=131104,-1;c=b>34359738367?68719476735:0}else if((c<34359738368?c:68719476736-c-(b?1:0))>=(a<34359738368?a:68719476736-a))return this.v|=131104,-1;this.H=c-c%34359738368+Math.trunc(c/2);b=b%34359738368+(c&1)*34359738368;c=this.H;a>34359738367&&(a=68719476736-a,d=!d);c>34359738367&&(b?(c=68719476735-c,b=68719476736-b):c&&(c=68719476736-c),e=!0,d=!d);var f=this.nb;f[0]=0;f[1]=0;f=this.wa;f[0]=1;f[1]=0;f=this.la;f[0]=a;f[1]=0;a=this.xa;
a[0]=b;for(a[1]=c;Ue(this.xa,this.la)>0;)Ve(this.la,this.la),Ve(this.wa,this.wa);do{if(Ue(this.xa,this.la)>=0&&(b=this.xa,a=this.la,b[0]-=a[0],b[1]-=a[1],b[0]<0&&(b[0]+=68719476736,b[1]--),Ve(this.nb,this.wa),We(this.xa)))break;Xe(this.la);Xe(this.wa)}while(!We(this.wa));b=this.nb[0];this.H=this.xa[0];d&&b&&(b=68719476736-b);e&&this.H&&(this.H=68719476736-this.H);return b}
function Ye(a,b,c,d){var e=a,f=b;b=!1;e>34359738367&&(d||this.model!=1001||e!=34359738368)&&(e=68719476736-e,b=!b);f>34359738367&&(f=68719476736-f,b=!b);if(e<262144&&f<262144){a=e*f;var g=0}else{a=e&262143;e=Math.trunc(e/262144);g=f&262143;f=Math.trunc(f/262144);var h=a*g,k=e*g+Math.trunc(h/262144);g=Math.trunc(k/262144);k=(k&262143)+a*f;a=(k*262144+(h&262143))%68719476736;g+=Math.trunc(k/262144)+e*f}b&&(a?(g=68719476735-g,a=68719476736-a):g&&(g=68719476736-g));b=a;a=g;e=a-a%34359738368;a=a*2%68719476736+
Math.trunc(b/34359738368);b=e+b%34359738368;a-a%34359738368!=e&&(b=a);d?g=b:(b==34359738368&&a==34359738368&&(this.v|=131072),this.H=b,g=a);c&&(a=this.H,!d&&(g||a>34359738367)&&(g!=68719476735||a<=34359738367)&&(this.v|=131072),g=a);return g}function Ze(a){a?a==34359738368?this.v|=163840:a=68719476736-a:this.v|=98304;return a}function $e(a,b){var c=a-b;c<0&&(c+=68719476736);Se.call(this,c,b,a);return c}
function Se(a,b,c){a=Math.trunc(a/17179869184);b=Math.trunc(b/17179869184);c=Math.trunc(c/17179869184);var d=a^(a^b)&(b^c);this.v|=(d&2?65536:0)|(d&1?32768:0)|((a^c)&(b^c)&2?131072:0)}function R(a,b){return((a/4294967296|0)&(b/4294967296|0))*4294967296+((a&b)>>>0)}function S(a,b){return R(a,(~(b/4294967296|0)&15)*4294967296+(~b>>>0))}function T(a,b){return(a<34359738368?a:a-68719476736)-(b<34359738368?b:b-68719476736)}
function af(a,b){return(~((a/4294967296|0)^(b/4294967296|0))&15)*4294967296+(~(a^b)>>>0)}function U(a,b){return(a/4294967296|0|b/4294967296|0)*4294967296+((a|b)>>>0)}function V(a){return a<34359738368?a:a-68719476736}function W(a,b){return((a/4294967296|0)^(b/4294967296|0))*4294967296+((a^b)>>>0)}function X(a){return(a/262144|0)+(a&262143)*262144}function Ge(a,b,c){switch(a&384){case 0:b-=b&262143;break;case 128:b=0;break;case 256:b=68719214592;break;case 384:b=c>131071?68719214592:0}return b}
function xe(a,b,c){switch(a&384){case 0:b&=262143;break;case 128:b=0;break;case 256:b=262143;break;case 384:b=c>34359738367?262143:0}return b}function Ve(a,b){a[0]+=b[0];a[1]+=b[1];a[0]>=68719476736&&(a[0]%=68719476736,a[1]++)}function Ue(a,b){var c=a[1]-b[1];c||(c=a[0]-b[0]);return c}function Xe(a){a[1]%2&&(a[0]+=68719476736);a[0]=Math.trunc(a[0]/2);a[1]=Math.trunc(a[1]/2)}function We(a){return!a[0]&&!a[1]}
var me=[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},ne,function(a,b){this.v&8192||(ne.call(this,a,b),this.v|=8192);oe.call(this,a,b)},oe,function(a,b){this.v&8192||(ne.call(this,a,b),this.v|=8192);pe.call(this,a,b)},pe,function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},
function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},
function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},qe,re,se,function(a,b){b&&this.j(b,this.i(this.g))},function(a,b){a=this.i(this.g);this.j(b,(a/262144|0)+(a&262143)*262144)},function(a,b){this.j(b,this.g*262144)},function(a,b){a=this.i(b);this.j(this.g,(a/262144|0)+(a&262143)*262144)},function(a,b){a=this.i(this.g);a=(a/262144|0)+(a&262143)*262144;this.j(this.g,a);b&&this.j(b,a)},function(a,b){this.j(b,Ze.call(this,
this.i(this.g)))},function(a,b){this.j(b,Ze.call(this,this.g))},function(a,b){this.j(this.g,Ze.call(this,this.i(b)))},function(a,b){a=Ze.call(this,this.i(this.g));this.j(this.g,a);b&&this.j(b,a)},function(a,b){this.j(b,Re.call(this,this.i(this.g)))},function(a,b){this.j(b,this.g)},function(a,b){this.j(this.g,Re.call(this,this.i(b)))},function(a,b){a=Re.call(this,this.i(this.g));this.j(this.g,a);b&&this.j(b,a)},function(a,b){this.j(b,Ye.call(this,this.i(b),this.i(this.g),!0))},function(a,b){this.j(b,
Ye.call(this,this.i(b),this.g,!0))},function(a,b){this.j(this.g,Ye.call(this,this.i(b),this.i(this.g),!0))},function(a,b){this.j(this.g,this.j(b,Ye.call(this,this.i(b),this.i(this.g),!0)))},function(a,b){this.j(b,Ye.call(this,this.i(b),this.i(this.g)));this.j(b+1&15,this.H)},function(a,b){this.j(b,Ye.call(this,this.i(b),this.g));this.j(b+1&15,this.H)},function(a,b){this.j(this.g,Ye.call(this,this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,Ye.call(this,this.i(b),this.i(this.g))));
this.j(b+1&15,this.H)},function(a,b){a=Te.call(this,this.i(this.g),this.i(b));a<0||(this.j(b,a),this.j(b+1&15,this.H))},function(a,b){a=Te.call(this,this.g,this.i(b));a<0||(this.j(b,a),this.j(b+1&15,this.H))},function(a,b){a=Te.call(this,this.i(this.g),this.i(b));a<0||this.j(this.g,a)},function(a,b){a=Te.call(this,this.i(this.g),this.i(b));a<0||(this.j(this.g,this.j(b,a)),this.j(b+1&15,this.H))},function(a,b){a=this.i(b);var c=this.i(b+1&15);c=Te.call(this,this.i(this.g),c,a);c<0||(this.j(b,c),this.j(b+
1&15,this.H))},function(a,b){a=this.i(b);var c=this.i(b+1&15);c=Te.call(this,this.g,c,a);c<0||(this.j(b,c),this.j(b+1&15,this.H))},function(a,b){a=this.i(b);b=this.i(b+1&15);b=Te.call(this,this.i(this.g),b,a);b<0||this.j(this.g,b)},function(a,b){a=this.i(b);var c=this.i(b+1&15);c=Te.call(this,this.i(this.g),c,a);c<0||(this.j(b,this.j(this.g,c)),this.j(b+1&15,this.H))},function(a,b){if(a=(this.g&131072)<<14>>23|this.g&255){var c=this.i(b);if(a>0){var d=34359738367;var e=c<34359738368?0:34359738368;
a<35&&(e+=c*Math.pow(2,a)%34359738368,d=34359738368-Math.pow(2,35-a));c<34359738368?c+d>34359738367&&(this.v|=131072):c-d<34359738368&&(this.v|=131072)}else a<=-35?e=c<34359738368?0:34359738367:(e=Math.trunc(c/Math.pow(2,-a)),c>34359738367&&(d=68719476736-Math.pow(2,36+a),e+=d));this.j(b,e)}},function(a,b){if(a=((this.g&131072)<<14>>23|this.g&255)%36){var c=this.i(b);a<0&&(a=36+a);c=c*Math.pow(2,a)%68719476736+Math.trunc(c/Math.pow(2,36-a));this.j(b,c)}},function(a,b){if(a=(this.g&131072)<<14>>23|
this.g&255){var c=this.i(b);c=a>0?a>=36?0:c*Math.pow(2,a)%68719476736:a<=-36?0:Math.trunc(c/Math.pow(2,-a));this.j(b,c)}},function(a,b){a=0;var c=this.i(b);if(c){for(;c<34359738368;)a++,c*=2;I(this,this.g)}this.j(b+1&15,a)},function(a,b){if(a=(this.g&131072)<<14>>23|this.g&255){var c=this.i(b),d=this.i(b+1&15);if(a>0){var e=c;if(a>=36){if(c>0&&c<34359738368||c>34359738367&&c<68719476735)this.v|=131072;if(a>=71){if(d>0&&d<34359738368||d>34359738367&&d<68719476735)this.v|=131072;c=0}else{c=d*Math.pow(2,
a-35)%34359738368;var f=34359738368-Math.pow(2,70-a);e<=34359738367?d+f>34359738367&&(this.v|=131072):d-f<=34359738367&&(this.v|=131072)}d=0;e>34359738367&&(c+=34359738368,d+=34359738368)}else c=c*Math.pow(2,a)%34359738368+Math.trunc(d%34359738368/Math.pow(2,35-a)),d=d*Math.pow(2,a)%34359738368,f=34359738368-Math.pow(2,35-a),e<=34359738367?e+f>34359738367&&(this.v|=131072):(e-f<=34359738367&&(this.v|=131072),c+=34359738368,d+=34359738368)}else a<=-36?(d=a<=-72?c>34359738367?68719476735:0:Math.trunc(c%
34359738368/Math.pow(2,-a-35)),c<=34359738367?c=0:(c=68719476735,d+=34359738368)):(f=c>34359738367?68719476736-Math.pow(2,36+a):0,d=Math.trunc(d%34359738368/Math.pow(2,-a))+c%34359738368*Math.pow(2,35+a)%34359738368,c=Math.trunc(c/Math.pow(2,-a))+f,c>34359738367&&(d+=34359738368));this.j(b,c);this.j(b+1&15,d)}},function(a,b){if(a=((this.g&131072)<<14>>23|this.g&255)%72){var c=this.i(b),d=this.i(b+1&15),e=c;a<0&&(a=72+a);a<36?(c=c*Math.pow(2,a)%68719476736+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,
a)%68719476736+Math.trunc(e/Math.pow(2,36-a))):(c=d*Math.pow(2,a-36)%68719476736+Math.trunc(c/Math.pow(2,72-a)),d=e*Math.pow(2,a-36)%68719476736+Math.trunc(d/Math.pow(2,72-a)));this.j(b,c);this.j(b+1&15,d)}},function(a,b){if(a=(this.g&131072)<<14>>23|this.g&255){var c=this.i(b),d=this.i(b+1&15);a>0?a>=36?(c=a>=72?0:d*Math.pow(2,a-36)%68719476736,d=0):(c=c*Math.pow(2,a)%68719476736+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,a)%68719476736):a<=-36?(d=a<=-72?0:Math.trunc(c/Math.pow(2,-a-36)),c=0):
(d=Math.trunc(d/Math.pow(2,-a))+c*Math.pow(2,36+a)%68719476736,c=Math.trunc(c/Math.pow(2,-a)));this.j(b,c);this.j(b+1&15,d)}},L,function(a,b){a=this.i(b);this.j(b,this.i(this.g));this.j(this.g,a)},function(a,b){var c=a=!1,d=this.i(b),e=d/262144|0;for(d&=262143;!a;)if(this.j(d,this.i(e)),(a=d>=this.g)||(e=e+1&262143,d=d+1&262143,c=!0),a||!this.flags.T){c&&this.j(b,e*262144+d);a||ie(this,-1);break}},function(a,b){a=(this.i(b)+262145)%68719476736;this.j(b,a);a<34359738368&&I(this,this.g)},function(a,
b){a=(this.i(b)+262145)%68719476736;this.j(b,a);a>=34359738368&&I(this,this.g)},function(a,b){b&1&&(this.v|=4096);b&2&&he(this,this.Ka/262144|0);b&4&&J(this);b&8&&this.C(a);I(this,this.g)},function(a,b){a=b<<14;this.v&a&&(this.v&=~a,I(this,this.g))},function(){this.R=this.g},L,function(a,b){a=(this.i(b)+262145)%68719476736;this.j(b,a);a/262144|0||(this.v|=262144);this.j(a&262143,(this.v&262143)*262144+this.u);this.v&=-8193;I(this,this.g)},function(a,b){a=this.i(b);a+=262145;this.j(a&262143,this.i(this.g));
a>=68719476736&&(a-=68719476736);a/262144|0||(this.v|=262144);this.j(b,a)},function(a,b){a=this.i(b);var c=this.i(a&262143);this.j(this.g,c);this.g==b&&(a=c);a-=262145;a<0&&(a+=68719476736);(a/262144|0)==262143&&(this.v|=262144);this.j(b,a)},function(a,b){a=this.i(b);var c=this.i(a&262143);a-=262145;a<0&&(a+=68719476736);(a/262144|0)==262143&&(this.v|=262144);this.j(b,a);I(this,c&262143)},function(){this.j(this.g,(this.v&262143)*262144+this.u);this.v&=-8193;I(this,this.g+1)},function(a,b){this.j(b,
(this.v&262143)*262144+this.u);this.v&=-8193;I(this,this.g)},function(a,b){this.j(this.g,this.i(b));this.j(b,this.g*262144+this.u);I(this,this.g+1)},function(a,b){a=this.i(b);this.j(b,this.i(a/262144|0));I(this,this.g)},function(a,b){this.j(b,Q.call(this,this.i(b),this.i(this.g)))},function(a,b){this.j(b,Q.call(this,this.i(b),this.g))},function(a,b){this.j(this.g,Q.call(this,this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,Q.call(this,this.i(b),this.i(this.g))))},function(a,b){this.j(b,
$e.call(this,this.i(b),this.i(this.g)))},function(a,b){this.j(b,$e.call(this,this.i(b),this.g))},function(a,b){this.j(this.g,$e.call(this,this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,$e.call(this,this.i(b),this.i(this.g))))},Pe,function(a,b){T(this.i(b),this.g)<0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.g)==0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.g)<=0&&I(this,this.u+1)},function(){I(this,this.u+1)},function(a,b){T(this.i(b),this.g)>=0&&I(this,this.u+1)},function(a,
b){T(this.i(b),this.g)!=0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.g)>0&&I(this,this.u+1)},Qe,function(a,b){T(this.i(b),this.i(this.g))<0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.i(this.g))==0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.i(this.g))<=0&&I(this,this.u+1)},function(){I(this,this.u+1)},function(a,b){T(this.i(b),this.i(this.g))>=0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.i(this.g))!=0&&I(this,this.u+1)},function(a,b){T(this.i(b),this.i(this.g))>0&&I(this,
this.u+1)},Pe,function(a,b){V(this.i(b))<0&&I(this,this.g)},function(a,b){V(this.i(b))==0&&I(this,this.g)},function(a,b){V(this.i(b))<=0&&I(this,this.g)},function(){I(this,this.g)},function(a,b){V(this.i(b))>=0&&I(this,this.g)},function(a,b){V(this.i(b))!=0&&I(this,this.g)},function(a,b){V(this.i(b))>0&&I(this,this.g)},function(a,b){b&&this.j(b,this.i(this.g))},function(a,b){a=this.i(this.g);V(a)<0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.i(this.g);V(a)==0&&I(this,this.u+1);b&&this.j(b,
a)},function(a,b){a=this.i(this.g);V(a)<=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){I(this,this.u+1);b&&this.j(b,this.i(this.g))},function(a,b){a=this.i(this.g);V(a)>=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.i(this.g);V(a)!=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.i(this.g);V(a)>0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){this.j(b,Q.call(this,this.i(b),1))},function(a,b){a=this.j(b,Q.call(this,this.i(b),1));V(a)<0&&I(this,this.g)},function(a,b){a=this.j(b,
Q.call(this,this.i(b),1));V(a)==0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),1));V(a)<=0&&I(this,this.g)},function(a,b){this.j(b,Q.call(this,this.i(b),1));I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),1));V(a)>=0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),1));V(a)!=0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),1));V(a)>0&&I(this,this.g)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));b&&this.j(b,a)},function(a,
b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)<0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)==0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)<=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)>=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,
b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)!=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),1));V(a)>0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){this.j(b,Q.call(this,this.i(b),68719476735))},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)<0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)==0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)<=0&&I(this,
this.g)},function(a,b){this.j(b,Q.call(this,this.i(b),68719476735));I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)>=0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)!=0&&I(this,this.g)},function(a,b){a=this.j(b,Q.call(this,this.i(b),68719476735));V(a)>0&&I(this,this.g)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));V(a)<
0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));V(a)==0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));V(a)<=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));V(a)>=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,
Q.call(this,this.i(this.g),68719476735));V(a)!=0&&I(this,this.u+1);b&&this.j(b,a)},function(a,b){a=this.j(this.g,Q.call(this,this.i(this.g),68719476735));V(a)>0&&I(this,this.u+1);b&&this.j(b,a)},te,te,function(){this.j(this.g,0)},function(a,b){this.j(this.g,this.j(b,0))},function(a,b){this.j(b,R(this.i(b),this.i(this.g)))},function(a,b){this.j(b,R(this.i(b),this.g))},function(a,b){this.j(this.g,R(this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,R(this.i(b),this.i(this.g))))},function(a,
b){this.j(b,R(68719476735-this.i(b),this.i(this.g)))},function(a,b){this.j(b,R(68719476735-this.i(b),this.g))},function(a,b){this.j(this.g,R(68719476735-this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,R(68719476735-this.i(b),this.i(this.g))))},qe,re,Qe,qe,function(a,b){this.j(b,R(this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(b,R(this.i(b),68719476735-this.g))},function(a,b){this.j(this.g,R(this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,
R(this.i(b),68719476735-this.i(this.g))))},Pe,Pe,se,se,function(a,b){this.j(b,W(this.i(b),this.i(this.g)))},function(a,b){this.j(b,W(this.i(b),this.g))},function(a,b){this.j(this.g,W(this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,W(this.i(b),this.i(this.g))))},function(a,b){this.j(b,U(this.i(b),this.i(this.g)))},function(a,b){this.j(b,U(this.i(b),this.g))},function(a,b){this.j(this.g,U(this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,U(this.i(b),this.i(this.g))))},
function(a,b){this.j(b,R(68719476735-this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(b,R(68719476735-this.i(b),68719476735-this.g))},function(a,b){this.j(this.g,R(68719476735-this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,R(68719476735-this.i(b),68719476735-this.i(this.g))))},function(a,b){this.j(b,af(this.i(b),this.i(this.g)))},function(a,b){this.j(b,af(this.i(b),this.g))},function(a,b){this.j(this.g,af(this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,
this.j(b,af(this.i(b),this.i(this.g))))},ue,ue,function(a,b){this.j(this.g,68719476735-this.i(b))},function(a,b){this.j(this.g,this.j(b,68719476735-this.i(b)))},function(a,b){this.j(b,U(68719476735-this.i(b),this.i(this.g)))},function(a,b){this.j(b,U(68719476735-this.i(b),this.g))},function(a,b){this.j(this.g,U(68719476735-this.i(b),this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,U(68719476735-this.i(b),this.i(this.g))))},function(a,b){this.j(b,68719476735-this.i(this.g))},function(a,b){this.j(b,
68719476735-this.g)},function(){this.j(this.g,68719476735-this.i(this.g))},function(a,b){this.j(this.g,this.j(b,68719476735-this.i(this.g)))},function(a,b){this.j(b,U(this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(b,U(this.i(b),68719476735-this.g))},function(a,b){this.j(this.g,U(this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,U(this.i(b),68719476735-this.i(this.g))))},function(a,b){this.j(b,U(68719476735-this.i(b),68719476735-this.i(this.g)))},function(a,
b){this.j(b,U(68719476735-this.i(b),68719476735-this.g))},function(a,b){this.j(this.g,U(68719476735-this.i(b),68719476735-this.i(this.g)))},function(a,b){this.j(this.g,this.j(b,U(68719476735-this.i(b),68719476735-this.i(this.g))))},ve,ve,function(){this.j(this.g,68719476735)},function(a,b){this.j(this.g,this.j(b,68719476735))},we,ye,ze,Ae,Be,Ce,De,Ee,we,ye,ze,Ae,Be,Ce,De,Ee,we,ye,ze,Ae,Be,Ce,De,Ee,we,ye,ze,Ae,Be,Ce,De,Ee,Fe,He,Ie,Je,Ke,Le,Me,Ne,Fe,He,Ie,Je,Ke,Le,Me,Ne,Fe,He,Ie,Je,Ke,Le,Me,Ne,Fe,He,
Ie,Je,Ke,Le,Me,Ne,Pe,Pe,function(a,b){R(this.i(b),this.g)==0&&I(this,this.u+1)},function(a,b){R(this.i(b),this.g*262144)==0&&I(this,this.u+1)},function(){I(this,this.u+1)},function(){I(this,this.u+1)},function(a,b){R(this.i(b),this.g)!=0&&I(this,this.u+1)},function(a,b){R(this.i(b),this.g*262144)!=0&&I(this,this.u+1)},Qe,Qe,function(a,b){R(this.i(b),this.i(this.g))==0&&I(this,this.u+1)},function(a,b){R(this.i(b),X(this.i(this.g)))==0&&I(this,this.u+1)},function(){I(this,this.u+1)},function(){I(this,
this.u+1)},function(a,b){R(this.i(b),this.i(this.g))!=0&&I(this,this.u+1)},function(a,b){R(this.i(b),X(this.i(this.g)))!=0&&I(this,this.u+1)},function(a,b){this.j(b,S(this.i(b),this.g))},function(a,b){this.j(b,S(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)==0&&I(this,this.u+1);this.j(b,S(a,this.g))},function(a,b){a=this.i(b);var c=this.g*262144;R(a,c)==0&&I(this,this.u+1);this.j(b,S(a,c))},function(a,b){I(this,this.u+1);this.j(b,S(this.i(b),this.g))},function(a,b){I(this,this.u+
1);this.j(b,S(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)!=0&&I(this,this.u+1);this.j(b,S(a,this.g))},function(a,b){a=this.i(b);var c=this.g*262144;R(a,c)!=0&&I(this,this.u+1);this.j(b,S(a,c))},function(a,b){this.j(b,S(this.i(b),this.i(this.g)))},function(a,b){this.j(b,S(this.i(b),X(this.i(this.g))))},function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)==0&&I(this,this.u+1);this.j(b,S(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)==0&&I(this,this.u+1);this.j(b,
S(a,c))},function(a,b){I(this,this.u+1);this.j(b,S(this.i(b),this.i(this.g)))},function(a,b){I(this,this.u+1);this.j(b,S(this.i(b),X(this.i(this.g))))},function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)!=0&&I(this,this.u+1);this.j(b,S(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)!=0&&I(this,this.u+1);this.j(b,S(a,c))},function(a,b){this.j(b,W(this.i(b),this.g))},function(a,b){this.j(b,W(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)==0&&I(this,this.u+1);this.j(b,
W(a,this.g))},function(a,b){a=this.i(b);var c=this.g*262144;R(a,c)==0&&I(this,this.u+1);this.j(b,W(a,c))},function(a,b){I(this,this.u+1);this.j(b,W(this.i(b),this.g))},function(a,b){I(this,this.u+1);this.j(b,W(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)!=0&&I(this,this.u+1);this.j(b,W(a,this.g))},function(a,b){a=this.i(b);var c=this.g*262144;R(a,c)!=0&&I(this,this.u+1);this.j(b,W(a,c))},function(a,b){this.j(b,W(this.i(b),this.i(this.g)))},function(a,b){this.j(b,W(this.i(b),X(this.i(this.g))))},
function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)==0&&I(this,this.u+1);this.j(b,W(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)==0&&I(this,this.u+1);this.j(b,W(a,c))},function(a,b){I(this,this.u+1);this.j(b,W(this.i(b),this.i(this.g)))},function(a,b){I(this,this.u+1);this.j(b,W(this.i(b),X(this.i(this.g))))},function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)!=0&&I(this,this.u+1);this.j(b,W(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)!=0&&I(this,this.u+1);
this.j(b,W(a,c))},function(a,b){this.j(b,U(this.i(b),this.g))},function(a,b){this.j(b,U(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)==0&&I(this,this.u+1);this.j(b,U(a,this.g))},function(a,b){a=this.i(b);R(a,this.g*262144)==0&&I(this,this.u+1);this.j(b,U(a,this.g*262144))},function(a,b){I(this,this.u+1);this.j(b,U(this.i(b),this.g))},function(a,b){I(this,this.u+1);this.j(b,U(this.i(b),this.g*262144))},function(a,b){a=this.i(b);R(a,this.g)!=0&&I(this,this.u+1);this.j(b,U(a,this.g))},
function(a,b){a=this.i(b);var c=this.g*262144;R(a,c)!=0&&I(this,this.u+1);this.j(b,U(a,c))},function(a,b){this.j(b,U(this.i(b),this.i(this.g)))},function(a,b){this.j(b,U(this.i(b),X(this.i(this.g))))},function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)==0&&I(this,this.u+1);this.j(b,U(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)==0&&I(this,this.u+1);this.j(b,U(a,c))},function(a,b){I(this,this.u+1);this.j(b,U(this.i(b),this.i(this.g)))},function(a,b){I(this,this.u+1);this.j(b,U(this.i(b),
X(this.i(this.g))))},function(a,b){a=this.i(b);var c=this.i(this.g);R(a,c)!=0&&I(this,this.u+1);this.j(b,U(a,c))},function(a,b){a=this.i(b);var c=X(this.i(this.g));R(a,c)!=0&&I(this,this.u+1);this.j(b,U(a,c))},P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],Oe=[function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a){this.C(a)},function(a,b){switch(b){case 0:a=this.i(this.g);a&8&&(this.v&=-131073);
a&131072&&(this.v&=-262145);break;default:this.C(a)}},function(a,b){switch(b){case 0:a=0;this.v&131072&&(a|=8);this.v&262144&&(a|=65536);this.j(this.g,a);break;default:this.C(a)}},function(a){this.C(a)},function(a){this.C(a)}];
function bf(a){sc.call(this,"Debugger",a,-1);this.Ja=!1;this.Ga=18;this.O=36;this.W=["<",">"];this.ta=[];this.Ia=Y();this.P=Y(0);this.la=Y(0);this.ia=Y(0);this.K=[];this.u=this.R=this.N=[];cf(this);this.Z=this.pa=0;this.v=[];this.Ba=void 0;df(this);this.G=this;this.va={};this.da=0;this.ea=null;this.U=[];ef(this,a.messages);this.ua=a.commands;this.Ha=[];this.S=0;this.Na=this.Ca=null;this.H=this.La=this.Ka=this.oa=this.xa=0;this.wa=this.na=this.M=null;var b=this;p.pdp10===void 0&&(p.pdp10=function(c){return ff(b,
c)})}xa(bf,sc);function gf(a){a=a&&a.D;a==null&&(a=-1);return a}function Y(a,b,c){return{D:a===void 0?null:a,cb:b===void 0?!1:b,qa:!1,V:c}}function hf(a,b,c,d){a.D=b;a.cb=c||!1;a.qa=!1;a.V=d}function jf(a){return[a.D,a.cb,a.qa,a.V,a.gb]}function kf(a,b){var c=Y(b[0],b[1],b[2]);c.qa=b[3];b[4]&&(c.Ab=tc(a,c.gb=b[4]));return c}n=bf.prototype;
n.za=function(a,b,c,d){this.J=b;this.I=a;this.B=c;this.na=a.F;this.Ga=b.H;(b=Ed(a,"messages"))&&ef(this,b);if(a=Ed(a,"commands"))this.ua=a;lf(this,function(e){a:{var f=d.J.g,g=e[0],h=e=0,k=f.length;if(g){e=gf(mf(d,g,d.la));if(e===-1){d.A("invalid address: %s\n",g);break a}h=e>>>d.J.u;k=1}d.A("blockid   physical   blockaddr  used    size    type\n");d.A("--------  ---------  ---------  ------  ------  ----\n");g=-1;for(var l=0;k--;){var m=f[h];m.type==g?l++||d.A("...\n"):(g=m.type,l=nd[g],m&&d.A("%08x  %%08x  %%08x  %#06x  %#06x  %s\n",
m.id,h<<d.J.u,m.D,m.Za,m.size,l),g!=sd&&(g=-1),l=0);e+=16384;h++}}});nc(this)};
n.sa=function(a,b,c){var d=this;switch(b){case "debugInput":return this.M=this.L[b]=c,c.onkeydown=function(e){if(e.keyCode==13){var f=d.M.value;d.M.value="";ff(d,f,!0)}else if(e.keyCode==27)d.M.value=f="";else if(e.keyCode==38?(f=null,d.F<d.C.length-1&&(f=d.C[++d.F])):e.keyCode==40&&(d.F>0?f=d.C[--d.F]:(f="",d.F=-1)),f!=null){var g=f.length;d.M.value=f;d.M.setSelectionRange(g,g)}f!=null&&e.preventDefault&&e.preventDefault()},!0;case "debugEnter":return this.L[b]=c,Cb(c,function(){if(d.M){var e=d.M.value;
d.M.value="";ff(d,e,!0);return!0}return!1}),!0;case "step":return this.L[b]=c,Cb(c,function(e){var f=!1;oc(d,!0)||(pc(d,!0),f=ad(d,e?1:0,null),pc(d,!1));return f}),!0}return!1};function nf(a){if(a.M){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.M.focus();window&&window.scrollTo(b,c)}}n.Ma=function(a,b){var c=-1,d=gf(a);d!==-1&&(c=gd(this.J,d),b&&a.D!=null&&(a.D+=b||1));return c};n.yb=function(a,b,c){var d=gf(a);d!==-1&&(fd(this.J,d,b),c&&a.D!=null&&(a.D+=c||1),K(this.I,-1))};
n.Hb=function(a,b){a<0&&(a+=68719476736);b<0&&(b+=68719476736);a=Ye.call(this.B,a,b,!1,!0);a>=34359738368&&(a-=68719476736);return a};
function mf(a,b,c){var d;c||(c=Y());var e=c.D;if(b!==void 0){a:{var f;e=a.W[0];var g=a.W[1],h=e=="("||e=="{"||e=="["?"\\":"",k=e=="["?"\\":"";for(h=new RegExp(h+e+"([^"+k+e+k+g+"]+)"+h+g);f=b.match(h);){k=Ec(a,f[1]);if(k===void 0){b=void 0;break a}f=e+f[1]+g;k=k!=null?F(a,k):"undefined";b=b.replace(f,k)}if(a.ta.length)for(e=a.ta[0],g=a.ta[1],h=e=="("||e=="{"||e=="["?"\\":"",k=e=="["?"\\":"",h=new RegExp(h+e+"([^"+k+e+k+g+"]+)"+h+g);f=b.match(h);)b=b.replace("["+f[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){g=
null;switch(e[1].toLowerCase()){case "ops":g=a.Sa}if(g==null)break;b=b.replace(e[0],g.toString())}}if(b.charAt(0)=="%"){var l=!0;b=b.substr(1)}var m;if(b.match(/^[a-z_][a-z0-9_]*$/i))for(e=b.toUpperCase(),g=0;g<a.K.length;g++)if(h=a.K[g].aa[e],h!=null){var r=h.o;break}r!=null&&(m=Y(r));if(m)return m;b.indexOf("0x")>=0?d=16:b.indexOf("0o")>=0?d=8:b.indexOf(".")>=0&&(d=10);e=Ec(a,b)}e!=null&&(e=of(e,a.Ga),hf(c,e,l,d));return c}
function pf(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.Ab=tc(a,b.gb=c[2]))}function of(a,b){a<0&&a>=-34359738368&&(a+=68719476736);return Math.trunc(Math.abs(a))%Math.pow(2,b===void 0?36:b)}function qf(a,b){return F(a,b/262144,18)+" "+F(a,b%262144,18)}
function ef(a,b){a.G=a;a.da=8;a.ea=null;a.U=[];b=tc(a,b.replace("keys","key").replace("kbd","keyboard"),!1,",");if(b.length)for(var c in v){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;d<0&&(d+=b.length);d<0&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}d>=0&&(a.da|=v[c],a.A("%s messages enabled\n",c))}}function lf(a,b){for(var c in v)if(32==v[c]){a.va[c]=b;break}}n.rb=function(a){return rf.indexOf(a.toUpperCase())};
n.sb=function(a){var b=this.B;switch(a){case sf:var c=b.u;break;case tf:c=b.K;break;case uf:c=b.g;break;case vf:c=b.v&262143;break;case wf:c=b.v&131072?1:0;break;case xf:c=b.v&65536?1:0;break;case yf:c=b.v&32768?1:0;break;case zf:c=b.v&8192?1:0;break;case Af:c=b.v&32?1:0;break;case Bf:c=b.v&262144?1:0}return c};
n.message=function(a,b){var c;if(b&1&&this.B){var d=" @"+F(this,Y(this.B.Z).D,18);a=a.replace(/(\n?)$/,d)}if(!this.ea||a!=this.ea)if(this.ea=a,this.da&0x800000000000)this.U.push(a);else{if(this.da&70368744177664&&this.B&&(c=this.B.flags.T)||oc(this,!0))c&&(a=a.replace(/(\n?)$/," (cpu halted)$1")),Bd(this);this.print(a,b);this.B&&(a=this.B,de(a),a.oa=0,a.I&&K(a.I))}};
n.init=function(a){this.Ja=!0;this.A("Type ? for help with PDPjs Debugger commands\n");Cf(this);a||nf(this);this.ua&&(a=this.ua,this.ua=null,ff(this,a,!0))};function df(a){var b;if(!ke(a))a.v&&a.v.length&&a.A("instruction history buffer freed\n"),a.Z=0,a.v=[];else if(!a.v||!a.v.length){a.v=Array(Df);for(b=0;b<a.v.length;b++)a.v[b]=Y();a.Z=0;a.A("instruction history buffer allocated\n")}}function Ef(a,b,c){if(!Ff(a,c))return!1;$c(a.B,b);return!0}
function ad(a,b,c,d){if(!Ff(a))return!1;var e="";c===null&&(e=(c=!a.Ca||a.Ca=="tr")?"tr":"t");a.H=0;b||ke(a)&&le(a,a.B.u,0);try{b=ce(a.B,b);var f=a.B.ab(b);f>0&&(bd(a.B,f),a.H+=f,cd(a.B,f,!0),dd(a.B,f),a.oa++)}catch(g){typeof g!="number"&&(b=g,a.H=0,kc(a.B,b.stack||b.message))}d!==!1&&(a.na&&a.na.stop(),K(a.I,-1));Cf(a,c||!1,e);return a.H>0}function Bd(a,b){a.B&&J(a.B,b)}function Cf(a,b,c){b=b===void 0?!0:b;a.Ja&&(c&&a.A("%s%s\n",Gf,c),hf(a.P,a.B.u),b&&a.S!=1?Hf(a):If(a))}
function Ff(a,b){var c;(c=!a.B||!mc(a.B))||(c=a.B,c.flags.ca?c=!0:(c.A("%s not powered\n",c.toString()),c=!1),c=!c);return c||a.B.flags.T?(b||a.A("cpu busy or unavailable, command ignored\n"),!1):!lc(a.B)}n.Aa=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};n.ra=function(a,b){b&&this.A("%s\n",a?"suspending":"shutting down");return a?this.save():!0};n.reset=function(a){df(this);this.oa=0;this.ea=null;this.H=0;hf(this.P,this.B.u);this.flags.T=!1;Jf(this);a||Cf(this)};
n.save=function(){var a=new G(this);a.set(0,jf(this.P));a.set(1,jf(this.la));a.set(2,jf(this.ia));a.set(3,[this.C,this.X,this.da]);a.set(4,this.K);return a.data()};n.restore=function(a){var b=0;a[3]!==void 0&&(this.P=kf(this,a[b++]),this.la=kf(this,a[b++]),this.ia=kf(this,a[b++]),this.C=a[b][0],typeof this.C=="string"&&(this.C=[this.C]),this.X=a[b][1],this.da|=a[b][2]);a[4]&&(this.K=a[4]);return!0};n.start=function(a,b){this.S||this.A("running\n");this.flags.T=!0;this.Ka=a;this.La=b};
n.stop=function(a,b){if(this.flags.T){this.flags.T=!1;this.H=b-this.La;if(!this.S){b="stopped";if(this.H){a-=this.Ka;var c=a>0?Math.round(this.H*1E3/a):0;b+=" (";ke(this)&&(b+=this.oa+" instructions, ",this.oa=0);b+=this.H+" cycles, "+a+" ms, "+c+" hz)"}else rc(this,70368744177664)&&(b+=" (use the 't' command to execute blocked faults)");this.A("%s\n",b)}Cf(this,!0);nf(this);Jf(this,this.B.u);this.ea=null}};function ke(a){return a.u.length>1||!!a.pa}
function le(a,b,c){var d=-1;c||(d=a.B.i(b),d>>23==2756&&a.B.Z==b&&(b=ie(a.B,1)));if(c>0&&(a.pa&&!--a.pa||Ad(a,b,1,a.u)))return!0;c>=0&&a.v.length&&(a.oa++,d<0&&(d=a.B.i(b)),d>=0&&(hf(a.v[a.Z],b),++a.Z==a.v.length&&(a.Z=0)));return!1}
function Kf(a,b,c,d){var e=Y(b.D),f=a.Ma(b,1),g,h=0,k=f/2097152|0,l;for(l in Lf)if(g=Lf[l][k&l]){var m=+l;k>>=6;switch(m){case 32512:var r=Mf;h=k&3;break;case 32256:r=Nf;h=k&7;break;case 29248:r=Of,h=(k&48)>>2|(k&6)>>1}break}r=r&&r[h]||"";r=="S"&&g>Pf&&(r="B");r=Qf[g||0]+r;if(g){if(m==28700)h=F(a,f/67108864&127,-1);else for(m=f>>23&15,h=F(a,m,-1),k=0;h&&k<Rf.length;k++)if(g==Rf[k][0]&&(l=Rf[k][m])){r=Qf[l];h="";break}r=gb(r,-8)+(h?h+",":"");f&4194304&&(r+="@");r+=F(a,f&262143,-1);(f=f>>18&15)&&(r+=
"("+F(a,f,-1)+")")}else r=gb(r,-8)+qf(a,f);f=r;g="";m=F(a,e.D,18)+":";if(e.D!==-1&&b.D!==-1){do if(r=a.Ma(e,1),g+=" "+qf(a,r),e.D==null)break;while(e.D!=b.D)}m+=gb(g,-16)+f;c&&(m=gb(m,-48)+";"+(c||""),m=a.B.flags.Ta?m+("cycles="+Hd(a.B).toString()+" cs="+ab(a.B.Ha)):m+(d!=null?"="+d.toString():""));return m}
function Sf(a,b,c,d,e){var f=-1;if(b){for(var g=b.toUpperCase(),h=0;h<Rf.length;h++)for(var k in Rf[h])if(+k){var l=Rf[h][k];if(g==Qf[l]){g=Qf[Rf[h][0]];c&&(c=F(a,+k)+","+c);break}}for(var m in Lf){var r=+m;k=Lf[m];switch(r){case 32512:h=Mf;break;case 32256:h=Nf;break;case 29248:h=Of;break;default:h=[""]}for(var q in k){l=k[q];for(var t=0;t<h.length;t++){var E=h[t];E=="S"&&l>Pf&&(E="B");if(g==Qf[l]+E){f=r!=29248?t:(t&3)<<1|(t&12)<<2;f=(q|f<<6)*2097152;break}}if(f>=0)break}if(f>=0)break}!(f<0)||c&&
c.match(/^[0-9A-Z$%.?]/i)||(c=b+c,b="",f=0)}else c&&(f=r=0);if(f>=0&&c)for(g=c.split(","),g.length>2&&(e||a.A("too many operands: %s\n",c),g.length=0,f=-1),m=0;m<g.length;m++)if(l=g[m].trim()){q=l.match(/(@?)([^(]*)\(?([^)]*)\)?/);if(!q){e||a.A("unknown operand: %s\n",l);f=-1;break}q[1]&&(f+=4194304);if(l=q[3]){l=Ec(a,l,e);if(l==void 0){f=-1;break}l=X(D(a,l,36,!0));f+=l}l=q[2];if(m||g.length==1)l=l?l.replace(/(^|[^0-9])\./g,"$1"+F(a,d,18)):"0";l=Ec(a,l,e);if(l==void 0){f=-1;break}if(!m&&g.length>
1)if(r==28700){if(l<0||l>127)l&=127;f+=l*67108864}else{if(l<0||l>15)l&=15;f+=l<<23}else{if(b||m)if(l<0||l>262143)l&=262143;f+=l}}f<0&&!e&&a.A("unknown instruction: %s %s\n",b,c);return f}function cf(a){var b;a.u=["bp"];if(a.R!==void 0)for(b=1;b<a.R.length;b++){var c=a.R[b];c=gf(c);var d=a.J;zd(d.g[c>>>d.u],!1)}a.R=["br"];if(a.N!==void 0)for(b=1;b<a.N.length;b++)c=a.N[b],c=gf(c),d=a.J,zd(d.g[c>>>d.u],!0);a.N=["bw"];a.xa=0;a.pa=0}
n.Ra=function(a,b,c){var d=!0;c||tg(this,a,b,!1,!0);if(a!=this.u){var e=gf(b);if(e===-1)this.A("invalid address: %s\n",F(this,b.D,18)),d=!1;else{var f=this.J;f.g[e>>>f.u].Ra(e&16383,a==this.N)}}d&&(a.push(b),c?b.qa=!0:(vg(this,a,a.length-1,"set"),df(this)))};function tg(a,b,c,d,e){var f=!1;c=gf(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==gf(h)&&(!d||h.qa)){f=!0;h.qa||e||vg(a,b,g,"cleared");b.splice(g,1);b!=a.u&&(d=a.J,zd(d.g[c>>>d.u],b==a.N));h.qa||df(a);break}}return f}
function wg(a,b){for(var c=1;c<b.length;c++)vg(a,b,c);return b.length-1}function vg(a,b,c,d){c=b[c];a.A("%d %s%d\n",b[0],F(a,c.D,18),d?" "+d:c.gb?' "'+c.gb+'"':"")}function Jf(a,b){if(b!==void 0)Ad(a,b,1,a.u,!0),a.S=0;else for(b=1;b<a.u.length;b++){var c=a.u[b];if(c.qa){if(!tg(a,a.u,c,!0))break;b=0}}}
function Ad(a,b,c,d,e){var f=!1;if(!a.xa++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.qa)for(var k=gf(h)&(d==a.u?65535:-1),l=0;l<c;l++)if(b+l==k){var m;f=!0;h.qa&&(tg(a,d,h,!0),e=!0);if(m=h.Ab){f=!1;for(var r=0;r<m.length;r++)if(!xg(a,m[r],!0)){if(m[r].indexOf("if")){f=!0;break}for(var q=r+1;q<m.length&&m[q].indexOf("else");q++)r++;if(q==m.length){f=!0;break}}a.B.flags.T||(f=!0)}if(f){e||vg(a,d,g,"hit");break}}}a.xa--;return f}n.Fb=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function yg(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];typeof h=="number"&&(e[g]=h={o:h});var k=h.o,l=h.a;if(k!==void 0){var m=f;k=[k>>>0,g];var r=nb(m,k,a.Fb);r<0&&m.splice(-(r+1),0,k)}l&&(h.a=l.replace(/''/g,'"'))}a.K.push({zd:b,D:c,Ub:d,aa:e,Cb:f})}function zg(a,b,c){var d=[],e=gf(b)>>>0;for(b=0;b<a.K.length;b++){var f=a.K[b],g=f.D>>>0,h=f.Ub;if(e>=g&&e<g+h){e=nb(f.Cb,[e-g],a.Fb);e>=0?Ag(a,b,e,d):c&&(e=~e,Ag(a,b,e-1,d),Ag(a,b,e,d));break}}return d}
function Bg(a,b,c){var d=a.J,e=0,f=null,g=0;b.forEach(function(h,k){d.g[(k&d.v)>>>d.u].j(h,k&16383,k);f==null&&(f=k);k>g&&(g=k);e++});e?(b="start address ",c!=null?(I(a.B,c),b+=F(a,c)):b+="unspecified",a.A("%d words loaded at %s-%s, %s\n",e,F(a,f),F(a,g),b),Cf(a)):a.A("no data\n")}function Ag(a,b,c,d){var e={},f=a.K[b].Cb,g=0,h=null;c>=0&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.K[b].aa[h],h=h.charAt(0)=="."?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}
function Cg(a,b){var c=b[0].substr(1),d=b[1]&&b[1][0]>="0"&&b[1][0]<="9"?b[1]:void 0,e=d?b[2]:b[1],f=mf(a,d,a.ia);if(!e)return a.A("begin assemble at %s\n",F(a,f.D,18)),a.X=!0,K(a.I),!0;var g=e.match(/^(['"]?)(.*?)(\.klm|\.mac|\.html|\.txt|)\1$/i);if(g&&(g[1]||g[3])){f=mf(a,d);if(a.wa)a.A("assembly already in progress\n");else{var h=g[2]+g[3];g[3]||(c+="s");var k=f.D,l=a.wa=new Dg(a);Eg(l,h,k,c,function(m,r){if(!m)try{var q=l.L;q==null&&(q=k);Bg(a,l.ba,q)}catch(t){typeof t=="number"?m=t||-1:(a.A("%s\n",
t.message),m=-1)}m&&a.A("error (%d) processing %s\n",m,r||h);a.wa=null;m||ff(a)})}return!1}b.shift();b.shift();b.shift();b=Sf(a,e,b.join(""),f.D||0);b>=0&&(a.yb(f,b),a.A("%s\n",Kf(a,f)));return!0}function Fg(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Hc(a)||a.A("no variables\n"),!0;if(!c[2])return Hc(a,c[1]);if(!c[3])return delete a.g[c[1]],!0;b=Ec(a,c[3]);return b!==void 0?(a.g[c[1]]={value:b,Jb:void 0},!0):!1}a.A("invalid assignment:%s\n",b);return!1}
function Gg(a,b,c){var d=null;b=mf(a,b);var e=zg(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.D-e[1])&&(g=" + "+ab(f,4,!0));f=e[0]+" ("+F(a,e[1],18)+")"+g;c&&a.A("%s\n",f);d=f}e.length>4&&e[4]&&(g="",(f=e[5]-b.D)&&(g=" - "+ab(f,4,!0)),f=e[4]+" ("+F(a,e[5],18)+")"+g,c&&a.A("%s\n",f),d||(d=f))}else c&&a.A("no symbols\n");return d}
function Hf(a,b){var c;if(b&&b[1]=="?")a.A("register commands:\n"),a.A("\tr\tdump registers\n"),a.A("\trm\tdump misc registers\n"),a.A("\trx [#]\tset flag or register x to [#]\n");else{var d=a.B,e=void 0;c==null&&(c=!0);if(b!=null&&b.length>1){var f=b[1];if(f=="m")e=!0;else{var g=f.indexOf("=");if(g>0)b=f.substr(g+1),f=f.substr(0,g);else if(b.length>2)b=b[2];else{a.A("missing value for %s\n",b[1]);return}g=Ec(a,b);if(g===void 0)return;b=a.rb(f);if(b<0){a.A("unknown register: %s\n",f);return}f=0;var h=
a.B;switch(b){case sf:I(h,g);hf(a.P,h.u);break;case vf:he(h,g);break;case wf:f=131072;break;case xf:f=65536;break;case yf:f=32768;break;case zf:f=8192;break;case Af:f=32;break;case Bf:f=262144}f&&(h.v=g?h.v|f:h.v&~f);K(a.I);a.A("updated registers:\n")}}f=a.A;e=e===void 0?!0:e;b="";for(g=0;g<16;g++){!g||g&3||(b+="\n");h=a;var k=Za(g,2);hf(h.Ia,g);k+="="+F(h,h.Ma(h.Ia),36)+" ";b+=k}if(e){e=b;b="";for(g=0;g<rf.length;g++)(h=rf[g]||"")&&(h+="="+F(a,a.sb(g),g>=wf?1:g==tf?23:18)+" "),b+=h;b=e+("\n"+b)}f.call(a,
"%s\n",b);c&&(hf(a.P,je(d)),If(a,F(a,a.P.D,18)))}}function Hg(a,b){b=lb(b);var c=b.match(/^(['"])(.*?)\1$/);c?c[2].length>1?a.A("%s\n",c[2]):Fc(a,null,c[2].charCodeAt(0)):Ec(a,b,!1)}
function Ig(a,b,c){if(c=="?")a.A("trace commands:\n"),a.A("\tt  [#]\ttrace # instructions\n"),a.A("\ttr [#]\ttrace # instructions with register updates\n"),a.A("\ttc [#]\ttrace # cycles\n"),a.A("note: bn [#] breaks after # instructions without updates\n");else{var d=b!="t";c=zc(a,c,void 0,!0)||1;var e=0;b=="tc"&&(e=c,c=1);a.Ca=b;Bb(c,function(){return pc(a,!0)&&ad(a,e,d,!1)},function(){a.na&&a.na.stop();K(a.I,-1);pc(a,!1)})}}
function If(a,b,c,d){b=mf(a,b,a.P);d===void 0&&(d=1);var e=256;if(c!==void 0)if(c.charAt(0)=="l")c=zc(a,c.substr(1)),c!=null&&(d=c);else{d=mf(a,c);if(d.D<b.D)return;e=d.D-b.D;if(e>256){a.A("range too large\n");return}d=-1}for(c=0;e>0&&d--;){var f=oc(a,!1)||a.S?a.H:null,g=f!=null?"cycles":null,h=zg(a,b),k=b.D;if(h[0]&&d&&(!c&&d||h[0].indexOf("+")<0)){var l=h[0]+":";h[2]&&(l+=" "+h[2]);a.A("%s\n",l)}h[3]&&(g=h[3],f=null);h=a.ia;l=b;h.D=l.D;h.cb=l.cb;h.qa=l.qa;h.V=l.V;a.A("%s\n",Kf(a,b,g,f));e-=b.D-
k;c++}}
function xg(a,b,c){var d=!0;try{b.length&&b!="end"?c||a.A("%s%s\n",Gf,b):(a.X&&(a.A("ended assemble at %s\n",F(a,a.ia.D,18)),a.X=!1),b="");var e=b.charAt(0);if(e=='"'||e=="'")return!0;a.ea=null;if(mc(a)&&b.length>0){a.X&&(b="a "+F(a,a.ia.D,18)+" "+b);var f=!1,g=b;var h=h===void 0?" ":h;for(var k=[],l="",m=0,r=0;m<g.length;){var q=g[m++];l?q==l&&(l="",k.push(g.substr(r,m-r)),r=m):q=='"'||q=="'"?l=q:h.indexOf(q)>=0&&(k.push(g.substr(r,m-r-1)),r=m)}r<m&&k.push(g.substr(r,m-r));k[0]=k[0].toLowerCase();if(k&&
k.length){var t=k[0],E=t.charAt(0);for(m=1;m<t.length;m++)if(q=t.charAt(m),E=="?"||E=="r"||q<"a"||q>"z"){k[0]=t.substr(m);k.unshift(t.substr(0,m));break}}switch(k[0].charAt(0)){case "a":d=Cg(a,k);break;case "b":var ca=k[0],H=k[1],y=b;if(H=="?")a.A("breakpoint commands:\n"),a.A("\tbp #\tset exec breakpoint\n"),a.A("\tbr #\tset read breakpoint\n"),a.A("\tbw #\tset write breakpoint\n"),a.A("\tbc #\tclear breakpoint (* to clear all)\n"),a.A("\tbl\tlist all breakpoints\n"),a.A("\tbn [#]\tbreak after # instruction(s)\n");
else{var A=ca.charAt(1);if(A=="l"){var ra=wg(a,a.u);ra+=wg(a,a.R);(ra+=wg(a,a.N))||a.A("no breakpoints\n")}else if(A=="n"){var ha=+H||0;H&&(a.pa=ha);a.A("break after %d instruction(s)\n",ha)}else if(H===void 0)a.A("missing breakpoint address\n");else{var M=H=="*"?Y():mf(a,H,a.P);A=="c"?M.D==null?(cf(a),a.A("all breakpoints cleared\n")):tg(a,a.u,M)||tg(a,a.R,M)||tg(a,a.N,M)||a.A("breakpoint missing: %s\n",F(a,M.D,18)):M.D!=null&&(pf(a,M,y),A=="p"?a.Ra(a.u,M):A=="r"?a.Ra(a.R,M):A=="w"?a.Ra(a.N,M):a.A("unknown breakpoint command: %s\n",
A))}}break;case "c":var aa=a.I;aa.H&&(aa.H.value="");break;case "d":a:{var ia,la=k[0],sa=k[1],Fa=k[2],ci=k[3];if(sa=="?"){var ib="";for(ia in v)a.va[ia]&&(ib&&(ib+=","),ib+=ia);ib+=",state,symbols";a.A("dump memory commands:\n");a.A("\tdw [a] [n]    dump n words at address a\n");a.A("\tds [a] [n]    dump n words at address a as JSON\n");a.A("\tdh [p] [n]    dump n instructions from history position p\n");ib.length&&a.A("dump extension commands:\n\t%s\n",ib)}else if(sa=="state"){var Kd=Jg(a.I,!0);
if(Fa=="console")console.log(Kd);else{var Tf=a.I;Tf.H&&(Tf.H.value="");Kd&&a.A("%s\n",Kd)}}else if(sa=="symbols")for(var Ld=0;Ld<a.K.length;Ld++){var Md=a.K[Ld],jb;for(jb in Md.aa)if(jb.charAt(0)!="."){var Uf=Md.aa[jb].o;if(Uf!==void 0){var Vf=Md.aa[jb].l;Vf&&(jb=Vf);a.A("%s %s\n",F(a,Uf,18),jb)}}}else{if(la=="d"){for(ia in v)if(k[1]==ia){var Wf=a.va[ia];Wf?(k.shift(),k.shift(),Wf(k)):a.A("no dump registered for %s\n",sa);break a}sa||(la=a.Na||"dw")}else a.Na=la;if(la=="dh"){var Xf=sa,Yf=Fa,Zf="",
$f=0,ma=a.Z,ta=a.v;if(ta.length){var ja=+Xf||a.Ba,Db=+Yf||10;isNaN(ja)?ja=Db:Zf="more ";ja>ta.length&&(a.A("note: only %d available\n",ta.length),ja=ta.length);ma-=ja;ma<0&&(ta[ta.length-1].D==null?(ja=ma+ja,ma=0):ma+=ta.length);var Nd=[];Yf=="call"&&(Db=1E5,Nd=["CALL"]);for(Xf!==void 0&&a.A("%d instructions earlier:\n",ja);Db>0&&ma!=a.Z;){var ag=ta[ma++];if(ag.D==null)break;var Eb=Y(ag.D),di=ja--,bg=Kf(a,Eb,"history",di);(!Nd.length||bg.indexOf(Nd[0])>=0)&&a.A("%s\n",bg);Eb.pb&&(ma+=Eb.pb,Db-=Eb.pb,
ja-=Eb.pb);ma>=ta.length&&(ma=0);a.Ba=ja;$f++;Db--}}$f||(a.A("no %shistory available\n",Zf),a.Ba=void 0)}else{var Pa=0,cg=la=="ds",Fb=mf(a,sa,a.la);Fa&&(Fa.charAt(0)=="l"?(Fa=Fa.substr(1)||ci,Pa=zc(a,Fa)):Pa=mf(a,Fa).D-Fb.D,Pa<0&&(Pa=0),Pa>65536&&(Pa=65536));var ei=a.V;Fb.V&&(a.V=Fb.V);for(var dg=la=="db"?1:2,Od=Pa||32,Pd=dg==1?1:4,fi=(Od+Pd-1)/Pd|0||1,Qa="";fi--&&Od>0;){var Ga="",eg="";sa=F(a,Fb.D,18);for(var fg=Pd;fg-- >0&&Od-- >0;){var Qd=a.Ma(Fb,1);cg?(Ga&&(Ga+=","),Ga+=Qd):(Ga+=qf(a,Qd),Ga+=
"  ");for(var Rd=29,gi=0;dg==1&&Rd>=0;gi++){var Sd=Qd/Math.pow(2,Rd)%128;Ga+=F(a,Sd,7)+" ";eg+=Sd<32?".":String.fromCharCode(Sd);Rd-=7}}Qa&&(Qa+="\n");Qa=cg?Qa+(Ga+","):Qa+(sa+": "+Ga+(fg<0?" "+eg:""))}Qa&&a.A("%s\n",Qa);a.V=ei}}}break;case "e":if(k[0]=="else")break;var gg=k[0],Td=k[1];if(gg=="e"||gg=="ew"){var hi=a.Ma;var ii=a.yb}else Td=null;if(Td==null)a.A("edit memory commands:\n"),a.A("\tew [a] [...]  edit words at address a\n");else for(var Ud=mf(a,Td,a.la),Vd=2;Vd<k.length;Vd++){var Gb=Ec(a,
k[Vd]);if(Gb===void 0)break;Gb=of(Gb);a.A("changing %s from %s to %s\n",F(a,Ud.D,18),qf(a,hi.call(a,Ud)),qf(a,Gb));ii.call(a,Ud,Gb,1)}break;case "g":var hg=k[1],ji=b;if(hg!==void 0){var ig=mf(a,hg);pf(a,ig,ji);a.Ra(a.u,ig,!0)}Ef(a,!0,c);break;case "h":a.flags.T?(c||a.A("halting\n"),Bd(a)):oc(a,!0)||c||a.A("already halted\n");break;case "i":if(k[0]=="if"){var Hb=b.substr(2);Hb=lb(Hb);if(Ec(a,Hb)){c||a.A("true: %s\n",Hb);var jg=!0}else c||a.A("false: %s\n",Hb),jg=!1;jg||(d=!1);break}f=!0;break;case "k":var ki=
k[0];if(k[1]=="?")a.A("stack trace commands:\n"),a.A("\tk\tshow frame addresses\n"),a.A("\tks\tshow symbol information\n");else{var Wd=0,Xd=Y(),Ib=Y();for(a.A("stack trace for %s\n",F(a,Ib.D,18));Wd<10;){for(var Ra=null,li=256;Ib.D>>>0<65536;){Xd.D=a.Ma(Ib,2);if(Ib.D==null||!li--)break;if(!(Xd.D&1)){for(var mi=a,Kc=Xd,kg=null,Jb=Kc.D,lg=Jb,Yd=1;Yd<=6&&Jb;Yd++){if(Yd>2){Kc.D=Jb;var Lc=Kf(mi,Kc);if(Lc.indexOf("JSR")>=0){var mg=Lc.indexOf(" ");if(Jb+(Lc.indexOf(" ",mg+1)-mg-1)/2==lg){kg=Lc;break}}}Jb-=
2}Kc.D=lg;if(Ra=kg)break}}if(!Ra||Ra==null)break;var ng=null;if(ki=="ks"){var og=Ra.match(/[0-9A-F]+$/);og&&(ng=Gg(a,og[0]))}Ra=gb(Ra,-50)+"  ;"+(ng||"stack="+F(a,Ib.D,18));a.A("%s\n",Ra);Wd++}Wd||a.A("no return addresses found\n")}break;case "l":if(k[0]=="ln"){Gg(a,k[1],!0);break}f=!0;break;case "m":a:{var ua,va=null,N=k[1];N=="?"&&(N=void 0);if(N!==void 0){var Ha=0;if(N=="all")Ha=-4097,N=null;else if(N=="on")va=!0,N=null;else if(N=="off")va=!1,N=null;else{N=="keys"&&(N="key");N=="kbd"&&(N="keyboard");
for(ua in v)if(N==ua){Ha=v[ua];va=!!(a.da&Ha);break}if(!Ha){a.A("unknown message category: %s\n",N);break a}}if(Ha)if(k[2]=="on")a.da|=Ha,va=!0;else if(k[2]=="off"&&(a.da&=~Ha,va=!1,Ha==0x800000000000)){for(var pg=a.U.length>=1E3?a.U.length-1E3:0;pg<a.U.length;)a.A("%s\n",a.U[pg++]);a.U=[]}}var ni=0,Kb="";for(ua in v)if(!N||N==ua){var oi=!!(a.da&v[ua]);if(va===null||va==oi)Kb&&(Kb+=","),++ni%10||(Kb+="\n\t"),ua=="key"&&(ua="keys"),Kb+=ua}N===void 0&&a.A("message commands:\n\tm [category] [on|off]\tturn categories on/off\n");
a.A("%s%s\n",va!==null?va?"messages on:  ":"messages off: ":"message categories:\n\t",Kb||"none");df(a)}break;case "p":if(k[0]=="print"){Hg(a,b.substr(5));break}var qg=k[0],rg=qg=="p"?0:qg=="pr"?1:-1;if(k[1]=="?"||rg<0)a.A("step commands:\n"),a.A("\tp\tstep over instruction\n"),a.A("\tpr\tstep over instruction with register update\n");else if(a.S)a.A("step in progress\n");else{var sg=Y(a.B.u);a.Ma(sg);a.S?(a.Ra(a.u,sg,!0),Ef(a)||(a.I&&be(a.I),a.S=0)):Ig(a,rg?"tr":"t")}break;case "r":if(b=="reset"){a.I&&
a.I.reset();break}Hf(a,k);break;case "s":a:switch(k[1]){case "base":if(k[2]){var kb=+k[2];if(kb==2||kb==8||kb==10||kb==16)a.V=kb;else{a.A("invalid base: %d\n",kb);break}}a.A("default base: %d\n",a.V);break;case "cs":var Lb;k[3]!==void 0&&(Lb=+k[3]);switch(k[2]){case "int":a.B.pa=Lb;break;case "start":a.B.Ia=Lb;break;case "stop":a.B.ua=Lb;break;default:a.A("unknown cs option\n");break a}Lb!==void 0&&Gd(a.B);a.A("checksums %s\n",a.B.flags.Ta?"enabled":"disabled");break;case "sp":k[2]!==void 0&&(Id(a.B,
+k[2])||a.A("warning: using 1x multiplier, previous target not reached\n"));a.A("target speed: %s (%dx)\n",a.B.ia.toFixed(2)+"Mhz",a.B.na);break;default:if(k[1]){a.A("unknown option: %s\n",k[1]);break}case "?":a.A("debugger options:\n"),a.A("\tbase #\t\tset default base to #\n"),a.A("\tcs int #\tset checksum cycle interval to #\n"),a.A("\tcs start #\tset checksum cycle start count to #\n"),a.A("\tcs stop #\tset checksum cycle stop count to #\n"),a.A("\tsp #\t\tset speed multiplier to #\n")}break;
case "t":Ig(a,k[0],k[1]);break;case "u":If(a,k[1],k[2],8);break;case "v":if(k[0]=="var"){Fg(a,b.substr(3))||(d=!1);break}if(k[0]=="ver"){a.A("%s version %s (%s%s)\n","PDPjs","2.21",a.B.model,",RELEASE");a.A("%s\n",p.navigator?p.navigator.userAgent:"");break}f=!0;break;case "?":if(k[1]){Hg(a,b.substr(1));break}var Zd="commands:",$d;for($d in Kg)Zd+="\n"+gb($d,-9)+Kg[$d];ke(a)||(Zd+="\nnote: history disabled if no exec breakpoints");a.A("%s\n",Zd);break;default:f=!0}f&&(a.A("unknown command: %s\n",
b),d=!1)}}catch(ug){a.A("Debugger %s\n",ug.stack||ug.message),d=!1}return d}function ff(a,b,c){b!=null&&(a.Ha=tc(a,b,c));for(;b=a.Ha.shift();)if(!xg(a,b))return!1;return!0}
var Kg={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Pf=20,Qf=".WORD HLL HLLZ HLLO HLLE HRL HRLZ HRLO HRLE HRR HRRZ HRRO HRRE HLR HLRZ HLRO HLRE MOVE MOVS MOVN MOVM EXCH BLT PUSH POP LDB DPB IBP ILDB IDPB SETZ SETO SETA SETCA SETM SETCM AND ANDCA ANDCM ANDCB IOR ORCA ORCM ORCB XOR EQV LSH LSHC ROT ROTC ADD SUB MUL IMUL DIV IDIV ASH ASHC FSC FADR FSBR FMPR FDVR DFN UFA FAD FSB FMP FDV AOBJP AOBJN CAI CAM JUMP SKIP AOJ AOS SOJ SOS TR TL TD TS XCT JFFO JFCL JSR JSP JRST JSA JRA PUSHJ POPJ BLKI DATAI BLKO DATAO CONO CONI CONSZ CONSO UUO JOV JCRY0 JCRY1 JCRY JFOV HALT JRSTF JEN".split(" "),
sf=0,tf=1,uf=2,vf=3,wf=4,xf=5,yf=6,zf=7,Af=8,Bf=9,rf="PC RA EA PS OV C0 C1 BI ND PD".split(" "),Lg={},Lf=(Lg[28672]={0:101},Lg[32704]={5632:64,5696:63,5760:58,5824:27,5888:28,5952:25,6016:29,6080:26,10240:56,10304:48,10368:46,10432:84,10496:57,10560:49,10624:47,10752:21,10816:22,10880:69,10944:70,11008:88,11072:85,11136:83,11264:91,11328:23,11392:24,11456:92,11520:86,11584:87,11648:89,11712:90},Lg[32512]={6144:65,6400:59,6656:66,6912:60,7168:67,7424:61,7680:68,7936:62,8192:17,8448:18,8704:19,8960:Pf,
9216:53,9472:52,9728:55,9984:54,11776:50,12032:51,16384:30,16640:36,16896:37,17152:34,17408:38,17664:32,17920:44,18176:40,18432:39,18688:45,18944:33,19200:41,19456:35,19712:42,19968:43,20224:31,20480:1,20736:5,20992:2,21248:6,21504:3,21760:7,22016:4,22272:8,22528:9,22784:13,23040:10,23296:14,23552:11,23808:15,24064:12,24320:16},Lg[32256]={12288:71,12800:72,13312:73,13824:74,14336:75,14848:76,15360:77,15872:78},Lg[29248]={24576:79,24640:80,25088:81,25152:82},Lg[28700]={28672:93,28676:94,28680:95,28684:96,
28688:97,28692:98,28696:99,28700:100},Lg),Mf=["","I","M","S"],Nf=" L E LE A GE N G".split(" "),Of="N NE NA NN Z ZE ZA ZN C CE CA CN O OE OA ON".split(" "),Rf=[{0:85,8:102,4:103,2:104,6:105,1:106},{0:88,4:107,2:108,10:109}],Df=1E3,Gf=">> ";Mb(function(){for(var a=B("pdp10","debugger"),b=0;b<a.length;b++){var c=a[b],d=C(c);d=new bf(d);bc(d,c)}});
function Mg(a){z.call(this,"ROM",a,256);this.aa=this.g=null;this.F=+a.addr;this.v=+a.size;this.u=a.alias;typeof this.u=="string"&&(this.u=eval(this.u));this.C=a.file;this.H=bb(this.C);if(this.C){a=this.C;var b=cb(this.H);b!="json"&&b!="hex"&&(a=rb()+"/api/v1/dump?file="+this.C+"&format=bytes&decimal=true");var c=this;ob(a,null,!0,function(d,e,f){f?(c.A(274877906944,"Unable to load ROM resource (error %d: %s)\n",f,d),c.C=null):(Zb(c.Va,d,e),(d=sb(d,e))?(c.g=d.fa,c.aa=d.aa):c.C=null);Ng(c)})}}
xa(Mg,z);Mg.prototype.za=function(a,b,c,d){this.J=b;this.B=c;this.G=d;Ng(this)};Mg.prototype.Aa=function(){this.aa&&(this.G&&yg(this.G,this.id,this.F,this.v,this.aa),delete this.aa);return!0};Mg.prototype.ra=function(){return!0};
function Ng(a){if(!mc(a)){if(a.C){if(!a.g||!a.J)return;a.v||(a.v=a.g.length);if(a.g.length!=a.v)kc(a,"ROM size ("+ab(a.g.length,8,!0)+") does not match specified size ("+ab(a.v,8,!0)+")");else{var b=a.F;if(kd(a.J,b,a.v,td)){for(var c=0;c<a.g.length;c++)fd(a.J,b+c,a.g[c]);b=!0}else b=!1;if(b){b=[];typeof a.u=="number"?b.push(a.u):a.u!=null&&a.u.length&&(b=a.u);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.J,g=d.v,h=[],k=d.F>>>f.u;g>0&&k<f.g.length;)h.push(f.g[k++]),g-=16384;f=d.J;d=d.v;g=0;for(e>>>=
f.u;d>0&&e<f.g.length;){k=h[g++];if(!k)break;f.g[e++]=k;d-=16384}}delete a.g}}}nc(a)}}Mb(function(){for(var a=B("pdp10","rom"),b=0;b<a.length;b++){var c=a[b],d=C(c);d=new Mg(d);bc(d,c)}});
function Og(a){z.call(this,"RAM",a);this.aa=this.Oa=null;this.u=+a.addr;this.v=+a.size;this.ma=a.load;this.ya=a.exec;this.ma!=null&&(this.ma=+this.ma);this.ya!=null&&(this.ya=+this.ya);this.C=this.H=!1;this.g=a.file;this.F=bb(this.g);if(this.g){a=this.g;var b=cb(this.F);b!="json"&&b!="hex"&&(a=rb()+"/api/v1/dump?file="+this.g+"&format=bytes&decimal=true");var c=this;ob(a,null,!0,function(d,e,f){f?(c.A(274877906944,"Unable to load RAM resource (error %d: %s)\n",f,d),c.g=null):(Zb(c.Va,d,e),(d=sb(d,
e))?(c.Oa=d.Oa,c.aa=d.aa,c.ma==null&&(c.ma=d.ma),c.ya==null&&(c.ya=d.ya)):c.g=null);Pg(c)})}}xa(Og,z);Og.prototype.za=function(a,b,c,d){this.J=b;this.B=c;this.G=d;Pg(this)};Og.prototype.Aa=function(a,b){this.aa&&(this.G&&yg(this.G,this.id,this.u,this.v,this.aa),delete this.aa);b||this.reset();return!0};Og.prototype.ra=function(){return!0};
function Pg(a){if(a.J&&(!a.C&&a.v&&(kd(a.J,a.u,a.v,1)?a.C=!0:a.v=0),!mc(a))){if(!a.C)x("No RAM allocated");else if(a.g){if(!a.Oa)return;Qg(a,a.Oa,a.ma,a.ya,a.u)?a.A(137438953472,'Loaded image "%s"\n',a.F):a.A(137438953472,'Error loading image "%s"\n',a.F)}a.H=!0;nc(a)}}
Og.prototype.reset=function(){if(this.C&&!this.H){var a=this.J,b=this.u,c=this.v,d=b&16383;for(b>>>=a.u;c>0&&b<a.g.length;){var e=a.g[b],f=c,g=0;g=g===void 0?0:g;d=d||0;f===void 0&&(f=e.size);g<0&&g>=-34359738368&&(g+=68719476736);g=Math.trunc(Math.abs(g))%68719476736;for(var h=d;f--&&h<e.size;h++)e.G(g,d,e.D+d);c-=16384;b++;d=0}this.Oa&&Qg(this,this.Oa,this.ma,this.ya,this.u,!this.G)}this.H=!1};
function Qg(a,b,c,d,e,f){var g=!1;c==null&&(c=e);if(c!=null){for(g=0;g<b.length;g++)fd(a.J,c+g,b[g]);g=!0}g&&(d==null&&(J(a.B),f=!1),d!=null&&(a=a.B,a.Sa=d,I(a,d),f?a.flags.ca?a.flags.T||$c(a):a.flags.ha=!0:a.G&&a.flags.ca?J(a)||a.I.flags.reset||(Cf(a.G),K(a.I,-1)):f===!1&&J(a),!a.flags.T&&a.Na&&a.Na.stop()));return g}Mb(function(){for(var a=B("pdp10","ram"),b=0;b<a.length;b++){var c=a[b],d=C(c);d=new Og(d);bc(d,c)}});
function Rg(a){z.call(this,"SerialPort",a,65536);this.C=a.upperCase;typeof this.C=="string"&&(this.C=this.C=="true");this.v=!0;this.u=[];a=a.binding;if(a!="console"&&a){var b=ec("Panel",this.id);b&&(b=b.L[a])&&this.sa("",a,b)}this.g=this.F=null;this.exports={connect:this.Ib,receiveData:this.fb,receiveStatus:this.kc,setConnection:this.nc}}xa(Rg,z);n=Rg.prototype;
n.sa=function(a,b,c){if(!a||a=="textarea"){var d=this;this.L[b]=c;c.onkeydown=function(e){e=e||window.event;var f=0,g=e.keyCode;g==8?f=e.altKey?Ta.xb:Ta.Ob:g==46?f=Ta.xb:e.ctrlKey&&g>=Ta.wb&&g<=Ta.Pb&&(f=g-(Ta.wb-Ta.Lb));f&&(e.preventDefault&&e.preventDefault(),d.fb(f));return!0};c.onkeypress=function(e){e=e||window.event;if(!e.metaKey){var f=e.which||e.keyCode;e.altKey&&f==Ta.Nb&&(f=Ta.Mb);d.fb(f);e.preventDefault&&e.preventDefault()}return!0};c.onpaste=function(e){e.stopPropagation&&e.stopPropagation();
e.preventDefault&&e.preventDefault();(e=e.clipboardData||window.clipboardData)&&d.fb(e.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};n.za=function(a,b,c,d){this.I=a;this.J=b;this.B=c;this.G=d;nc(this)};
n.Ib=function(a){if(!this.g){var b=Ed(this.I,"connection");if(b){var c=b.split("->");if(c.length==2){var d=lb(c[0]);if(d!=this.Db)return;c=lb(c[1]);if(this.g=dc(c)){var e=this.g.exports;if(e){var f=e.connect;f&&f.call(this.g,this.v);if(this.F=e.receiveData){this.v=a;this.A(137438953472,"Connected %s.%s to %s\n",this.Va,d,c);return}}}}this.A(137438953472,"Unable to establish connection: %s\n",b)}}};n.Aa=function(a,b){if(!b)if(this.Ib(this.v),!a)this.reset();else if(!this.restore(a))return!1;return!0};
n.ra=function(a){return a?this.save():!0};n.reset=function(){};n.save=function(){var a=new G(this);a.set(0,[]);return a.data()};n.restore=function(){return!0};n.fb=function(a){if(typeof a=="number")this.u.push(a);else if(typeof a=="string")for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(b==10){if(c==13)continue;b=13}this.u.push(b)}else this.u=this.u.concat(a);return!0};n.kc=function(){};n.nc=function(a,b){return this.g?!1:(this.g=a,this.F=b,!0)};
Mb(function(){for(var a=B("pdp10","serial"),b=0;b<a.length;b++){var c=a[b],d=C(c);d=new Rg(d);bc(d,c)}});function Dg(a){this.g=a}
Dg.prototype.init=function(a,b,c){this.ma=a;this.X=(b||"").toLowerCase();this.done=c;this.S=0;this.J=[];this.P=[];this.G=[];this.u={};this.M={};this.O=[];this.N=[];this.ba=[];this.ga=[];this.Z=[];this.ea=this.W=this.ja=0;this.Y=this.ma||0;this.Ea=-1;this.I=[];this.U=null;this.B=0;this.K=null;this.F=this.R="";this.ia=/^[ \t]*([A-Z$%.?][0-9A-Z$%.]*:|)[ \t]*([A-Z$%.][0-9A-Z$%.]*|)([ \t]*)([^;]+|)(;?[\s\S]*)/i;this.C=this.v=null;this.H="";this.L=null};
function Eg(a,b,c,d,e){d&&d.indexOf("s")>=0?(a.init(c,d,e),a.G=b.split(/(\r?\n)/),a.P.push(a.G.length),Sg(a),a.done&&a.done(a.W)):(a.init(c,d,e),a.J=b.split(";"),Tg(a))}
function Tg(a){if(a.S==a.J.length)Sg(a),a.done&&a.done(a.W);else{var b=a.J[a.S];a.g.A("loading %s\n",bb(b));b.indexOf(":")<0&&".MAC.KLM".indexOf(b.slice(-4).toUpperCase())>=0&&(b+=".txt");ob(b,null,!0,function(c,d,e){if(e)a.done&&a.done(e,c);else{e=d;if(db(c,".html")){e="";var f;for(c=/<pre>([\s\S]*?)<\/pre>/gi;f=c.exec(d);)f=f[1],f.indexOf("&")>=0&&(f=f.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")),e+=f;(f=e.match(/&[a-z]+;/i))&&Ug(a,"unrecognized HTML entity '"+f[0]+"'")}d=
e.split(/(\r?\n)/);if(d.length&1){if(f=d.pop())Ug(a,"unexpected line '"+f+"'"),d.push(f),d.push("")}else Ug(a,"unexpected number of lines ("+d.length+")");a.G=a.G.concat(d);a.P[a.S]=d.length>>1;a.S++;setTimeout(function(){Tg(a)},0)}})}}
function Sg(a){if(a.X.indexOf("p")>=0)a.g.A("%s\n",a.G.join(""));else{var b=Gc(a.g);Vg(a,"APR",0);Vg(a,"PI",4);try{for(var c=0;c<a.G.length;c+=2){a.ja++;a.X.indexOf("l")>=0&&a.g.A("%s: %s\n",Wg(a),a.G[c]);if(!Xg(a,a.G[c]+"\r\n"))break;if(a.L!==null)break}a.B&&a.error("open block",a.u[a.K].ja);a.I.length&&a.error("open scope",a.I[0].ja);Yg(a);Zg(a);a.ga.forEach(function(d,e){d=$g(a,d,void 0,e,a.Z[e]);d!==void 0&&(d+=a.ba[e],a.ba[e]=ah(a,d,e))})}catch(d){a.g.A("%s\n",d.message),a.W=-1}a.X.indexOf("d")<
0&&(a.g.g=b)}}
function Xg(a,b,c,d,e){var f;a.C!=null&&(b=bh(a,b));for(var g=!0,h="";g;){var k=b.match(a.ia);if(!k||k[5]&&k[5].charAt(0)!=";")return a.error("failed to parse line '"+b+"'"),!1;g=!1;h=k[2].toUpperCase();if(h==ch||h==dh)c=null;if(c){for(f=0;f<c.length;f++){var l=c[f],m=a.u[a.K];if(!(m&&m.Pa.indexOf(l)>=0)){m=d[f]||e[f]||"";for(var r=0,q=b.length-k[5].length;r<q;){var t=b.indexOf(l,r);if(t<0)break;r=t+1;var E=t+l.length,ca="",H="";t&&(ca=b[t-1]).match(/[0-9A-Z$%.]/i)||!(E>=b.length)&&(H=b[E]).match(/[0-9A-Z$%.]/i)||
(ca=="'"&&t--,H=="'"&&E++,b=b.substr(0,t)+m+b.substr(E),r=t+m.length,g=!0)}}}c=null}if(a.B&&(a.B==1&&(f=b.indexOf(a.F),f>=0?(a.B++,b=b.substr(f+1)):a.error("expected "+a.U+" definition in '"+b+"'")),a.B>1&&(b=eh(a,b),g=!0),a.B))return!0}d=k[1];b=k[3];c=k[4].trim();k=k[4]+k[5];d&&(d=d.slice(0,-1),Vg(a,d,a.Y,fh));var y;h&&(y=c.match(/^([=:]+)(.*)/))&&(e=0,d=h,h=y[1],c=y[2],h=="=="?e|=gh:h=="=:"&&(e|=hh),Vg(a,d,c,e),h=c="");if(!h&&!c)return!0;a.U=h;if(y=ih(a,c))c=c.replace(y,jh(a,kh,ih(a,k))),b||(b=
"\t");for(;y=lh(a,c);)c=c.replace(y,y.slice(0,-1));if(!mh(a,h,c))switch(h){case nh:case oh:case ph:bh(a,k);break;case qh:h=c;y=$g(a,h);y!==void 0&&y>=0&&y<=262143?a.Y+=y:a.error("unrecognized BLOCK expression '"+h+"'");break;case rh:h=c;b=k=0;for(c=36;y=sh(a,h);){h=h.substr(y.length).trim();d=y;if(e=y.match(/^\((.*)\)\s*(.*)$/))e[1]&&(k=$g(a,"^D"+e[1])),d=e[2];if(k){d=d?$g(a,d):0;if(d===void 0||k<0||k>36){a.error("unexpected BYTE operand: "+y);break}d=D(a.g,d,k,!0);c<k&&(th(a,b),b=0,c=36);b+=d*Math.pow(2,
c-k);c-=k}else th(a,0)}c<36&&th(a,b);break;case uh:(h=c)?(a.L=$g(a,h),a.L===void 0&&a.error("unrecognized END expression '"+h+"'")):a.L=a.ma;break;case vh:wh(a,c);break;case xh:Yg(a);break;case yh:a.Y=$g(a,c)||0;break;case zh:Zg(a);break;case Ah:wh(a,c.replace(",",",,"));break;case Bh:case Ch:case Dh:case Eh:case Fh:case Gh:case Hh:case Ih:case Jh:case Kh:case Lh:case Mh:case ch:case dh:case Nh:case Oh:jh(a,h,k);break;case Ph:h=Qh(a,c);for(y=0;y<h.length;y++)delete a.g.g[h[y]],delete a.M[h[y]];break;
case Rh:case Sh:case Th:case Uh:case Vh:case Wh:case Xh:case Yh:break;default:wh(a,h,b,c)}return!0}
function mh(a,b,c){var d=a.u[b];if(!d)return!1;if(c!=null){if(d.Fa==Zh){var e=a.Y;Z(a,d.ka);if(e<a.Y){if(!c)return!0;$h(a);Z(a,c);d=a.ba[0];var f=a.ga[0];ai(a);if(d!==void 0)return a.ba[e]+=d&130023423,a.ba[e]+=d&4194304,f&&(a.ga[e]=a.ga[e]?a.ga[e]+("+"+f):f),!0}a.error("OPDEF '"+b+"' ("+c+") failed");return!1}b=a.v;a.v=d;d.Qa=Qh(a,c,!0);Z(a,d.ka,d.Pa,d.Qa,d.Bb);a.v=b;return!0}if(b[0]!="?")return!1;switch(b.substr(1)){case Fh:case Eh:case Mh:d.Fa||Z(a,d.ka);break;case Gh:d.Fa>0&&Z(a,d.ka);break;case Hh:d.Fa>=
0&&Z(a,d.ka);break;case Jh:d.Fa<0&&Z(a,d.ka);break;case Kh:d.Fa<=0&&Z(a,d.ka);break;case Ch:case Lh:case Dh:case Ih:d.Fa&&Z(a,d.ka);break;case ch:case dh:for(b=0;b<d.Qa.length;b++)Z(a,d.ka,d.Pa,[d.Qa[b]],[]);break;case Oh:for(;d.Fa-- >0;)Z(a,d.ka);break;default:c=d.ka,$h(a,b),Z(a,c),ai(a)}return!0}function Z(a,b,c,d,e){b=b.split(/\r?\n/);for(var f=0;f<b.length&&Xg(a,b[f]+"\r\n",c,d,e);f++);}
function $h(a,b){a.I.push({name:b,ba:a.ba,ga:a.ga,Y:a.Y,Ea:a.Ea,ja:a.ja});a.ba=[];a.ga=[];a.Ea<0&&(a.Ea=a.Y);a.Y=0}function ai(a){if(a.I.length){var b=a.I[a.I.length-1].name;b&&a.O.push({name:b,ba:a.ba,ga:a.ga});b=a.I.pop();a.ba=b.ba;a.ga=b.ga;a.Y=b.Y;a.Ea=b.Ea;a.I.length||a.Ea==-1||a.error("scope restore error")}else a.error("scope nesting error")}
function sh(a,b){var c=c===void 0?",":c;for(var d=0,e=!1,f=null,g=0;d<b.length;){var h=b[d++];if(h=='"')e=!e;else if(!e){if(!g&&c.indexOf(h)>=0){d--;break}if(h=="<")g++;else if(h==">"&&--g<0){a.error("missing bracket(s) in '"+b+"'");break}}}g?g>0&&a.error("extra bracket(s) in '"+b+"'"):f=b.substr(0,d);return f}
function $g(a,b,c,d,e){var f=-1;d===void 0&&(d=a.Ea>=0?a.Ea:a.Y);var g=b.replace(/SIXBIT\s*(\S)(.*?)\1/g,"'$2'").replace(/ASCII\s*(\S)(.*?)\1/g,'"$2"');if(c){var h="",k=g;if(f=g.match(/^([^\s]+)\s*(.*?)\s*$/))h=f[1],k=f[2];f=Sf(a.g,h,k,d,c)}f<0&&(g=g.replace(/\.([^0-9]|$)/g,F(a.g,d,-1)+"$1"),f=Ec(a.g,g,c),f===void 0&&a.error("unable to parse expression '"+b+"'",e));return f}
function ih(a,b){for(var c=0,d="",e=0,f=-1,g=b.length;e<b.length;){var h=b[e];if(h==";")break;h=="["&&(c++||(f=e));e++;if(h=="]"&&--c<=0){g=e;break}}c<0&&a.error("missing bracket(s) in '"+b+"'");f>=0&&(d=b.substr(f,g-f));return d}function Wg(a,b){b=b===void 0?a.ja:b;for(var c=0;b>a.P[c];)if(b-=a.P[c],c<a.J.length-1)c++;else break;return bb(a.J[c]+" line "+b)}
function lh(a,b){var c=null;if(b=b.match(/([A-Z$%.][0-9A-Z$%.]*)#/i)){c=b[0];b=b[1];var d="?"+b;if(a.u[d]===void 0){var e,f;var g=e=f=[];a.u[d]={name:d,Fa:bi,Pa:g,Bb:e,Qa:f,ka:b+": 0",ja:a.ja};a.N.push(d)}}return c}
function Qh(a,b,c){var d=[];for(c&&(b=b.replace(/^\(?(.*?)\)?$/,"$1"));b;){b=b.trim();c=sh(a,b);if(!c)break;var e=c;if(c[0]=="\\"){var f=1,g=0;c[1]=="'"?(f++,g=6):c[1]=='"'&&(f++,g=7);e=a;f=c.substr(f);g=g===void 0?0:g;var h=$g(e,f);if(h!==void 0){var k=5;switch(g){case 0:f=F(e.g,h,-1);break;case 6:k++;case 7:for(;h&&k--;)h=Math.trunc(h/Math.pow(2,g))}}e=f}d.push(e);b=b.substr(c.length+1)}return d}
function bh(a,b){var c=b;a.C==null&&(a.C=a.H="",b&&(a.C=b[0],c=b=b.substr(1)));if(a.C){var d=b.indexOf(a.C);d<0?c="":(c=b.substr(d+1),b=b.substr(0,d),a.C=null);a.H+=b}if(a.C==null){d=b=0;var e=a.H.length;a.U==oh&&e++;for(var f=0;f<e;f++){if(!b){d=0;var g=29;var h=7;a.U==ph&&(h--,g++)}var k=a.H.charCodeAt(f)&127;h==6&&(k>=97&&k<=122&&(k-=32),k=k+32&63);d+=k*Math.pow(2,g);g-=h;b++;g<0&&(th(a,d),b=0)}b&&th(a,d)}return c}
function jh(a,b,c){var d,e;a.F="<";a.R=">";var f=d=e=[];if(b==Bh){var g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\([^)]*\)|)\s*,?\s*(<|)([\s\S]*)/i);if(!g)return a.error("unrecognized "+b+" in '"+c+"'"),c;var h=g[1];if(g[2]&&g[2]!=","){d=f=Qh(a,g[2],!0);b=[];for(c=0;c<d.length;c++){var k=d[c].indexOf("<");if(k>=0){var l=d[c].lastIndexOf(">");l<0&&(l=d[c].length);b[c]=d[c].substr(k,l-k);d[c]=d[c].substr(0,k)}}d=b}k=pi;b=3}else if(b==Nh){a.F="[";a.R="]";g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\[)([\s\S]*)/i);
if(!g)return a.error("unrecognized "+b+" in '"+c+"'"),c;h=g[1];k=Zh;b=2}else if(b==kh)a.F="[",a.R="]",h="?"+$a(++a.ea,5),a.u[h]!==void 0&&a.error("literal symbol '"+h+"' redefined"),g=[c[0],c.substr(1)],k=qi,b=0;else if(b==ch||b==dh){a.v||a.error(b+" outside of macro");g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*,\s*(<|)([\s\S]*)/i);if(!g)return a.error("unrecognized "+b+" operands '"+c+"'"),c;for(k=0;k<a.v.Pa.length&&g[1]!=a.v.Pa[k];k++);if(k==a.v.Pa.length)return a.error("invalid "+b+" parameter '"+g[1]+
"'"),c;h="?"+b;f=[g[1]];b==dh?e=a.v.Qa[k].split(""):e=Qh(a,a.v.Qa[k]);k=e.length;b=2}else{if(b==Ch)k=1,c[0]==","&&(c=c.substr(1).trim());else{g=sh(a,c);if(!g)return a.error("missing "+b+" expression '"+c+"'"),c;c=c.substr(g.length+1);g=g.trim();if(b==Eh||b==Ih){h=sh(a,c);if(!h)return a.error("missing second "+b+" expression '"+c+"'"),c;c=c.substr(h.length+1)}k=b==Dh||b==Mh?a.u[g]!==void 0||a.M[g]!==void 0||a.g.g[g]!==void 0?1:0:$g(a,g)||0}g=c.match(/\s*(<|)([\s\S]*)/i);h="?"+b;b=1}h=h.toUpperCase();
a.B=1;a.K=h;a.u[h]={name:h,Fa:k,Pa:f,Bb:d,Qa:e,ka:"",ja:a.ja};g[b]&&(a.B=2,eh(a,g[b+1]));return h}function eh(a,b){for(var c="",d=0;d<b.length;d++)if(b[d]==a.F)a.B++;else if(b[d]==a.R&&(a.B--,a.B==1)){a.B=0;c=b.substr(d+1);b=b.substr(0,d);break}d=a.K||"";a.u[d].ka+=b;a.B||(a.K=null,mh(a,d));return c}
function Vg(a,b,c,d){d=d===void 0?0:d;b=b.toUpperCase().substr(0,6);if(d&fh&&a.M[b]!==void 0)a.error("redefined label '"+b+"'");else{var e=void 0;if(typeof c=="string"){e=[];var f=$g(a,c,e);if(f===void 0){a.error("invalid symbol '"+b+"': "+c);return}e.length>1&&a.error("too many undefined symbols in '"+b+"': "+e.join());c=f;e=e[0]}(f=a.M[b])?(f.value=c,f.Vb=d,f.ja=a.ja):a.M[b]={name:b,value:c,Vb:d,ja:a.ja};a.g.g[b]={value:c,Jb:e}}}
function wh(a,b,c,d){var e=[];b=(b+(c===void 0?"":c)+(d===void 0?"":d)).trim();c=$g(a,b,e);c!==void 0?e.length?e.length==1?th(a,c,e[0]):th(a,0,b):th(a,c):a.error("unrecognized word expression '"+b+"'")}
function Yg(a){for(var b=a.Y,c={},d=0;d<a.O.length;c={Wa:void 0,Ua:void 0,Da:void 0},d++){c.Da=a.O[d];c.Wa=[];c.Ua=0;c.Da.ba.forEach(function(h){return function(k,l){l===h.Wa.length&&h.Wa.push(k);h.Ua++}}(c));if(c.Ua==c.Wa.length)for(var e=b;e+c.Ua<=a.Y;e++){var f=void 0;for(f=0;f<c.Ua&&c.Wa[f]===a.ba[e+f]&&c.Da.ga[f]==a.ga[e];f++);if(f==c.Ua){Vg(a,c.Da.name,e,fh);c.Da=null;break}}if(c.Da){var g=a;Vg(a,c.Da.name,a.Y,fh);c.Da.ba.forEach(function(h){return function(k,l){th(g,k,h.Da.ga[l])}}(c))}}a.O=
[]}function Zg(a){for(var b=0;b<a.N.length;b++){var c=a.N[b],d=a.u[c];d?Z(a,d.ka):a.error("missing definition for variable '"+c+"'")}a.N=[]}function th(a,b,c){a.ba[a.Y]=ah(a,b);c!==void 0&&(a.ga[a.Y]=c);a.Z[a.Y]=a.ja;a.Y++}function ah(a,b,c){c=c===void 0?a.Y:c;var d=D(a.g,b||0,36,!0);(b<-34359738368||b>=68719476736)&&Ug(a,"truncated value "+Za(b)+" at location "+Za(c)+" to "+Za(d));return d}Dg.prototype.error=function(a,b){throw Error("error in "+Wg(this,b)+": "+a);};
function Ug(a,b){a.g.A("warning in %s: %s\n",Wg(a),b)}var fh=1,gh=2,hh=4,nh="ASCII",oh="ASCIZ",qh="BLOCK",rh="BYTE",Bh="DEFINE",uh="END",vh="EXP",Ch="IF1",Dh="IFDEF",Eh="IFDIF",Fh="IFE",Gh="IFG",Hh="IFGE",Ih="IFIDN",Jh="IFL",Kh="IFLE",Lh="IFN",Mh="IFNDEF",ch="IRP",dh="IRPC",Rh="LALL",xh="LIT",kh="LITERAL",Sh="LIST",yh="LOC",Th="NOSYM",Nh="OPDEF",Uh="PAGE",Ph="PURGE",Oh="REPEAT",ph="SIXBIT",Vh="SUBTTL",Wh="TITLE",zh="VAR",Xh="XALL",Ah="XWD",Yh="XLIST",pi=-1,Zh=-2,qi=-3,bi=-4;
function ri(a,b,c){z.call(this,"Computer",a,524288);this.flags.ca=!1;this.U=null;si(this,b);this.R=Ed(this,"autoPower",a,6);this.v=0;this.Z=+a.busWidth||+a.buswidth;this.O=this.K=this.P=null;this.N=this.X=!1;this.M=this.C=null;this.W=this.S=!1;this.url=Ed(this,"url")||"";(Math.random()+.1).toString(36);this.u=ti(this);if(this.B=ec("CPU",this.id)){this.G=ec("Debugger",this.id);this.J=new hd({id:this.Va+".bus",busWidth:this.Z},this.B,this.G);var d=cc(this.id);if(this.H=(this.F=ec("Panel",this.id))&&
this.F.L.print)for(b=0;b<d.length;b++){var e=d[b];e.print=this.F.print}this.A(0,"%s v%s\n%s\n%s\n","PDPjs","2.21","Copyright \u00a9 2012-2026 Jeff Parsons <Jeff@pcjs.org>","License: MIT <https://www.pcjs.org/LICENSE.txt>");for(b=0;b<d.length;b++)e=d[b],e.za&&e.za(this,this.J,this.B,this.G);b=null;e=Ed(this,"resume",a);e!==void 0&&(e.length>1?b=this.K=e:this.g=parseInt(e,10));e=!1;d=Ed(this,"state");d||(e=!0,d=a.state);d&&(this.P=b=d,e||(this.N=!0,this.g=ui),this.g&&(this.M=new G(this,"2.21"),this.M.load()?
b=null:delete this.M));!b&&this.g&&(b=vi(this))&&(this.N=!0);if(b){var f=this;ob(b,null,!0,function(g,h,k){k?(f.K=null,f.N=!1,f.A(274877906944,"Unable to load machine state from server (error %d%s)\n",k,h?": "+lb(h):"")):(f.O=h,f.X=!0);nc(f)})}else nc(this);this.L.power||(this.R=!0);!c&&this.R&&this.wait(this.Ya)}else x("Unable to find CPU component")}xa(ri,z);
function si(a,b){if(!b){var c,d=p.resources;if(typeof d=="object"&&(c=d.parms))try{b=eval("("+c+")")}catch(e){x(e.message+" ("+c+")")}}a.U=b}function Ed(a,b,c,d){var e=b.toLowerCase();e=zb(b)||zb(e);var f=p.resources;e===void 0&&a.U&&(e=a.U[b]);e===void 0&&c&&(e=c[b]);e===void 0&&typeof f=="object"&&f[b]&&(e=b);e===void 0&&(e=void 0);if(typeof e=="string"&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e=e=="true"}return e}n=ri.prototype;
n.wait=function(a,b){for(var c=this,d=cc(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!mc(f)){mc(f,function(){c.wait(a,b)});return}}a.call(this,b)};function wi(a,b){var c=new G(a,"2.21",xi);if(c.load()&&yi(c)){var d=c.get(zi),e=b?b.get(zi):"unknown";d!=e&&(a.A(274877906944,"Machine state may be out-of-date\n(%s vs. %s)\nCheck your browser's local storage limits\n",d,e),b||c.clear())}}
n.Ya=function(a){a===void 0&&(a=this.g||(this.O?Ai:ui));if(!this.v){this.v++;var b=!1,c=!1;this.S=!1;var d=this.M||new G(this,"2.21");if(a==Bi)b=!0;else if(a>ui){if(d.load(this.O)){this.C=new G(this,"2.21",Ci);this.C.load()&&(Di(),a=Ei,Fi(this.C));this.C.set(zi,hb("%T",new Date));this.C.store();var e=this.g&&!this.N;if(a==Ai||ac("Click OK to restore the previous PDPjs machine state, or CANCEL to reset the machine.")){if(c=yi(d)){var f=d.get("code"),g=d.get("data");f&&(f=="ok"?d.load(g):(f=="error"&&
g!="no machine state"?(this.A(274877906944,"Error: %s\n",g),g=="unable to verify user"&&(xb(Gi,""),this.u=null)):this.A("%s: %s\n",f,g),Fi(d),d.load()?(c=yi(d),e=!0):c=!1))}e&&wi(this,c?d:null)}else a==Ei&&d.clear()}else wi(this);delete this.O;delete this.M}e=cc(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.B&&(c=Hi(this,g,d,b,c));b=[d,a,c];a!=Bi?this.wait(this.Gb,b):this.Gb(b)}};
function Hi(a,b,c,d,e){if(!b.flags.ca){b.flags.ca=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,".")))),typeof f==="string"&&(f=null),!b.Aa(f,d)&&f&&(x("Unable to restore state for "+b.type),a.P&&!a.X?(c.clear(),a.g=ui,p.location&&p.location.reload()):a.S=!0,b.Aa(null),e=!1),!d&&b.ub){var g=b.ub.split("|");for(a=0;a<g.length;a++)b.A(137438953472,"%s\n",g[a])}}catch(h){x("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
n.Gb=function(a){var b=a[0],c=a[1]<0;a=a[2];this.W=!0;this.flags.ca=!0;var d=this.L.power;d&&(d.textContent="Shutdown");this.B&&(Hi(this,this.B,b,c,a),K(this,-2),this.B.ha());this.S&&(Di(),b.clear());!c&&this.C&&(this.C.clear(),delete this.C);this.v=0};function Di(){Ob("There may be a problem with your PDPjs machine.")}
function Jg(a,b,c){var d="none";if(a.v)return null;a.v--;var e=new G(a,"2.21"),f=new G(a,"2.21",xi),g=hb("%T",new Date);f.set(zi,g);e.set(zi,g);e.set(Ii,"2.21");e.set(Ji,p.location?p.location.href:null);e.set(Ki,p.navigator?p.navigator.userAgent:"");if(a.B&&a.B.ra){c&&(b&&(a.B.flags.ha=a.B.flags.T),J(a.B));var h=a.B.ra(b,c);typeof h==="object"&&e.set(a.B.id,h);c&&(a.B.flags.ca=!1,h===!1&&(d=null))}g=cc(a.id);for(var k=0;k<g.length;k++){var l=g[k];l.flags.ca&&(l.ra&&(h=l.ra(b,c),typeof h==="object"&&
e.set(l.id,h)),c&&(l.flags.ca=!1,h===!1&&(d=null)))}d&&(c?(g=h=!1,b?(a.u&&Li(a,a.u,e.toString()),f.store()&&e.store()||(d=null,h=g=!0)):a.g&&(h=!0,g=a.g==Mi),h&&e.clear(g)):d=e.toString());c&&(a.flags.ca=!1,b=a.L.power)&&(b.textContent="Power");a.v=0;return d}
n.reset=function(){this.flags.reset=!0;this.J&&this.J.reset&&(this.A("Resetting %s\n",this.J.type),this.J.reset());this.B&&this.B.reset&&(this.A("Resetting %s\n",this.B.type),this.B.reset());for(var a=cc(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.J&&c!==this.B&&c.reset&&(this.A("Resetting %s\n",c.type),c.reset())}this.flags.reset=!1;K(this,-1)};n.start=function(a,b){for(var c=cc(this.id),d=0;d<c.length;d++){var e=c[d];e.type!="CPU"&&e!==this&&e.start&&e.start(a,b)}K(this,-1)};
n.stop=function(a,b){for(var c=cc(this.id),d=0;d<c.length;d++){var e=c[d];e.type!="CPU"&&e!==this&&e.stop&&e.stop(a,b)}K(this,-1)};
function K(a,b){if(a.B){var c=a.B,d=b||0,e=c.L.speed;e&&(d<=0||(c.ib+=d)>=30)&&(e.textContent=c.flags.T?c.ea.toFixed(2)+"Mhz":"Stopped",c.ib=0)}if(a.F&&(a=a.F,b=b||0,a.N)){c=a.B.flags.T;d=!!(a.B.F&8);if(b<=0||(a.M+=b)>=60){e=a.B.u;if(a.L.PC){var f=a.G&&a.G.V||8;e=e||0;e=f==8?Za(e):ab(e);a.L.PC.textContent!=e&&(a.L.PC.textContent=e)}a.M=0}b<-1?a.u=a.B.u:b>0&&c&&!d&&(a.u=a.B.Ba);Sc(a,a.u);Mc(a,a.C)}}
n.sa=function(a,b,c){var d=this;switch(b){case "power":return this.L[b]=c,c.onclick=function(){d.v||(d.flags.ca?Jg(d,!1,!0):d.wait(d.Ya))},!0;case "reset":return this.L[b]=c,c.onclick=function(){if(d.flags.ca&&!d.v)if(d.g&&!d.K){var e=ac("Click OK to save changes to this PDPjs machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Jg(d,e,!0);!e&&d.P?p.location&&p.location.reload():d.Ya(ui)}else d.reset(),d.B&&!d.G&&d.B.ha()},!0;case "save":if(db(p.location?p.location.hostname:"localhost",
"pcjs.org"))c.parentNode.removeChild(c);else return this.L[b]=c,c.onclick=function(){var e=ti(d,!0);if(e){var f=!!(d.g&&!d.K||d.P),g=Jg(d,f);f?Li(d,e,g):d.A(274877906944,"Resume disabled, machine state not saved\n")}},!0}return!1};
function ti(a,b){var c=a.u;c||((c=wb(Gi),c!==void 0)?!c&&b&&(b=null,p.prompt&&(b=p.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Ni(a,c))||a.A(274877906944,"The user ID is invalid.\n")):b&&a.A(274877906944,"Browser local storage is not available\n"));return c}
function Ni(a,b){a.u=null;b=ob(rb()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&b.code=="ok"&&(xb(Gi,b.data),a.u=b.data)}catch(d){x(d.message+" ("+c+")")}return a.u}function vi(a){var b=null;a.u&&(b=rb()+"/api/v1/user?req=load&user="+a.u+"&state="+Oi(a,"2.21"));return b}
function Li(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Oi(a,"2.21");d.data=c;b=ob(rb()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");e>0&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&b.code=="ok"?a.A(274877906944,"Machine state saved to server\n"):c&&(c=b&&b.data||"unable to save machine state",c=b.code=="error"?"Error: "+c:"Error "+b.code+": "+c,a.A(274877906944,"%s\n",c),xb(Gi,""),a.u=null)}}
function be(a,b){if(a.H){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.H.focus();!b&&window&&window.scrollTo(c,d)}}var Ci="failsafe",xi="validate",zi="timestamp",Ii="version",Ji="url",Ki="browser",Gi="user",Bi=-1,ui=0,Ai=1,Ei=2,Mi=3;Mb(function(){for(var a=B("pdp10","machine"),b=0;b<a.length;b++){var c=a[b],d=C(c);c=B("pdp10","computer",c);for(var e=0;e<c.length;e++){var f=c[e],g=C(f);g=new ri(g,d,!0);bc(g,f);g.R&&g.wait(g.Ya)}}});
Nb.show.push(function(){for(var a=B("pdp10","computer"),b=0;b<a.length;b++){var c=C(a[b]);if(c=ec("Computer",c.id))c.flags.Kb=!1,c.W&&!c.flags.ca&&c.Ya(Bi)}});Nb.exit.push(function(){for(var a=B("pdp10","computer"),b=0;b<a.length;b++){var c=C(a[b]);if(c=ec("Computer",c.id))c.flags.Kb=!0,c.flags.ca&&Jg(c,!(!c.g||c.K),!0)}});function G(a,b,c){this.id=a.id;this.B="";this.g={};this.u=this.v=!1;this.key=Oi(a,b,c);Fi(this,a.Rb)}n=G.prototype;
n.set=function(a,b){try{this.g[a]=b}catch(c){w(1099511627776,c.message)}};n.get=function(a){return this.g[a]||null};n.data=function(){return this.g};n.load=function(a){return a?(this.B=a,this.u=!0,this.v=!1,!0):this.u?!0:tb()&&(a=wb(this.key))?(this.B=a,this.u=!0,w(2199023255552,"localStorage(%s): %d bytes loaded\n",this.key,a.length),!0):!1};function yi(a){var b=!0;if(!a.v)try{a.g=JSON.parse(a.B),a.v=!0}catch(c){x(c.message||c),b=!1}return b}
n.store=function(){var a=!0;if(tb()){var b=JSON.stringify(this.g);xb(this.key,b)?w(2199023255552,"localStorage(%s): %d bytes stored\n",this.key,b.length):(w(1099511627776,"Unable to store %d bytes in browser local storage\n",b.length),a=!1)}return a};n.toString=function(){return this.g?JSON.stringify(this.g):this.B};function Fi(a,b){a.B="";a.g={};a.u=a.v=!1;b&&a.set("parms",b)}
n.clear=function(a){Fi(this);var b=[];if(tb())try{for(var c=0,d=p.localStorage.length;c<d;c++)b.push(p.localStorage.key(c))}catch(f){vb(f)}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){var e=d;if(tb())try{p.localStorage.removeItem(e)}catch(f){vb(f)}w(2199023255552,"localStorage(%s) removed\n",d);b.splice(c,1);c=0}};function Oi(a,b,c){a=a.id;if(b){var d=b.indexOf(".");d>0&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Pi=0;
function Qi(a,b,c,d,e,f,g,h,k){h("Loading "+a+"...");ob(a,null,!0,function(l,m,r){r?(m||(m="unable to load "+a+" ("+r+")"),k(l,m,null)):Ri(m,a,b,c,d,e,f,g,h,k)})}
function Ri(a,b,c,d,e,f,g,h,k,l){function m(r,q,t){if(t)l(r,t,null);else{c&&(Zb(c,b,q),(t=b)&&t.indexOf("/")<0&&window.location.pathname.slice(-1)=="/"&&(t=window.location.pathname+t),f?f.slice(-1)=="}"?(f=f.slice(0,-1),f.length>1&&(f+=",")):f='{state:"'+f+'",':f="{",f+='url:"'+t+'"}',typeof resources=="object"&&(t=null),f=f.replace(/\$/g,"$$$$").replace(/'/g,"&apos;"),g&&(r=q.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2[^>]*>)/))&&(q=q.replace(r[0],r[1]+r[2]+g+r[4]),g=""),(r=q.match(/(<machine[^>]*\sdebugger=)(['"])(available)(\2[^>]*>)/))&&
(q=q.replace(r[0],r[1]+r[2]+"optional"+r[4])),q=q.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(g?' class="'+g+'"':"")+(f?" parms='"+f+"'":"")+(t?' url="'+t+'"':"")));h||(q=q.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1"+d+"$2"),q=q.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+e+"$2"),q=q.replace(/<xsl:variable name="APPVERSION"(\/>|>[^<]*<\/xsl:variable>)/,'<xsl:variable name="APPVERSION">2.21</xsl:variable>'));r=null;if(q.charAt(0)=="<")try{h||
(q=q.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(r=new window.ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(q)):r=(new window.DOMParser).parseFromString(q,"text/xml")}catch(E){r=null,q=E.message}else q="unrecognized XML: "+(q.length>255?q.substr(0,255)+"...":q);l(b,q,r)}}a?h?Si(b,a,k,m):m(b,a,""):l(b,"no data",null)}
function Si(a,b,c,d){var e;if(e=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(b)){var f=e[2];c("Loading "+f+"...");ob(f,null,!0,function(g,h,k){if(k||!h)d(g,b,"unable to resolve XML reference: "+e[0]+" ("+k+")");else{if(k=e[3]){var l=h.match(new RegExp("<"+e[1]+"[^>]*>"));if(l){for(var m=l[0],r,q=/( [a-z]+=)(['"])(.*?)\2/gi;r=q.exec(k);)m=m.toLowerCase().indexOf(r[1].toLowerCase())<0?m.replace(">",r[0]+">"):m.replace(new RegExp(r[1]+"(['\"])(.*?)\\1"),r[0]);l[0]!=m&&(h=h.replace(l[0],m))}else{d(g,b,"missing <"+
e[1]+"> in "+f);return}}h=h.replace(/<\?xml[^>]*>[\r\n]*/,"");b=b.replace(e[0],h);Si(g,b,c,d)}})}else d(a,b,"")}
function Ti(a,b,c,d,e,f,g){function h(y){if(r===void 0){var A=m&&B("machine-warning","",m);r=A&&A[0]||m}r&&(r.innerHTML=eb(y))}function k(y,A){if(typeof A=="string"&&A.indexOf("<!DOCTYPE html>")>=0){var ra=A.match(/<title>(?:PCjs: |)(.*?)<\/title>/);ra&&(A=ra[1])}w(1099511627776,"%s\n",A);h("Error: "+A+(y?" ("+y+")":""));q&&l();q=!1}function l(){--Pi||Rb(!0)}var m,r,q=!0;Pi++;u.machines[c]={};if(!d)return f&&Zb(c,"parms",f),l(),q;zb("debugger")=="true"&&d.indexOf("/debugger")<0&&(d=d.replace("/machine.xml",
"/debugger/machine.xml"));try{if(m=document.getElementById(c)){var t,E=p.resources;if(typeof E=="object"&&(t=E.css)){var ca=document.head||document.getElementsByTagName("head")[0],H=document.createElement("style");H.type="text/css";H.styleSheet?H.styleSheet.cssText=t:H.appendChild(document.createTextNode(t));ca.appendChild(H)}e||(e="/machines/"+b+"/xsl/components.xsl");b=b.split("/").pop();t=function(y,A,ra){ra?Qi(e||"","",a,b,"","",!1,h,function(ha,M,aa){if(aa)if(Zb(c,e||"",M),h("Processing "+d+
"..."),window.ActiveXObject||"ActiveXObject"in window)(aa=ra.transformNode(aa))?(m.outerHTML=aa,l()):k(ha,"transformNodeToObject failed");else if(document.implementation&&document.implementation.createDocument)if(M=new XSLTProcessor,M.importStylesheet(aa),aa=M.transformToFragment(ra,document))if(M=m.parentNode){var ia=ha=0,la=m.getBoundingClientRect();la.bottom<0&&(ha=window.scrollX,ia=window.scrollY);M.replaceChild(aa,m);(m=document.getElementById(c))&&la.bottom<0&&(aa=m.getBoundingClientRect(),
ia=window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_RELOAD?0:ia+Math.ceil(aa.height-la.height),window.scrollTo(ha,ia));l()}else k(ha,"invalid machine element: "+c);else k(ha,"transformToFragment failed");else k(ha,"unable to transform XML: unsupported browser");else k(ha,M)}):k(y,A)};d.charAt(0)!="<"?Qi(d,c,a,b,f||"",g||"",!0,h,t):Ri(d,"",c,a,b,f||"",g||"",!1,h,t)}else k(d,"missing machine element: "+c)}catch(y){k(d,y.message)}return q}
function Ui(a,b,c,d,e){Rb(!1);return Ti("PCx86","pcx86",a,b,c,d,e)}p.embedC1P=function(a,b,c,d,e){Rb(!1);return Ti("C1Pjs","osi/c1p",a,b,c,void 0,e)};p.embedPC=Ui;p.embedPCx86=Ui;p.embedPCx80=function(a,b,c,d,e){Rb(!1);return Ti("PCx80","pcx80",a,b,c,d,e)};p.embedPDP10=function(a,b,c,d,e){Rb(!1);return Ti("PDPjs","dec/pdp10",a,b,c,d,e)};p.embedPDP11=function(a,b,c,d,e){Rb(!1);return Ti("PDPjs","dec/pdp11",a,b,c,d,e)};
p.commandMachine=function(a,b,c,d,e,f){if(e=="script"){d=!1;e=u.commands;c+=".machine";if(!f)delete e[c],d=!0;else if(typeof f=="string"&&!e[c]){d=!0;for(var g=c,h=f.length,k=[],l=[],m="",r=null,q=0;q<h;q++){var t=f[q];if(t=='"'||t=="'")r&&t!=r?m+=t:(r?r=null:r=t,m&&(l.push(m),m=""));else{if(!r){if(t=="\r"||t=="\n")t=";";if(t==" "||t=="\t"||t==";"){m&&(l.push(m),m="");t==";"&&l.length&&(k.push(l),l=[]);continue}}m+=t}}m&&l.push(m);l.length&&k.push(l);e[g]=k;fc(c)||(d=!1)}return d?(b&&(a.disabled=
!0),!0):!1}if(d&&(g=ec(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};p.enableEvents=Rb;p.sendEvent=Pb;})()

//# sourceMappingURL=pdp10.js.map
